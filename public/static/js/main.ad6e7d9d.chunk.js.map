{"version":3,"sources":["components/ImageUploader.js","actions/registerSubscription.js","actions/unregisterSubscription.js","notificationHelper.js","url.js","containers/Loading.jsx","containers/GrayBubbleButton.jsx","components/NewGroupForm.js","containers/GreenBubbleButton.jsx","App.js","actions/keepAlive.js","actions/createGroup.js","actions/updateGroup.js","actions/deleteGroup.js","actions/requestInvitation.js","actions/getGroupData.js","components/UserGroups.js","actions/getGame.js","actions/createGame.js","actions/updateGame.js","actions/deleteGame.js","CONSTS.js","sizes.js","components/ImageSlider.js","actions/goToPlayerPage.js","components/GameData.js","containers/WhoOwesWho.jsx","components/GameSummary.js","actions/deleteImage.js","components/ImageData.js","actions/postImage.js","components/ImagesTab.js","components/OnGoingGame.js","components/NewGameForm.js","components/EditGameForm.js","containers/ShowAlert.jsx","components/GamesTab.js","actions/createPlayer.js","actions/updatePlayer.js","actions/deletePlayer.js","components/PlayerSummary.js","components/PlayersTab.js","components/GroupPage.js","actions/generalRequest.js","components/Postman.js","actions/login.js","components/Login.js","index.jsx","containers/RedBubbleButton.jsx","containers/ShowErrorAlert.jsx","containers/ShowSuccessAlert.jsx"],"names":["ImageUploader","props","onReaderLoad","e","setState","image","target","result","readURL","preventDefault","files","reader","FileReader","onload","readAsDataURL","uploadImage","updateImage","remoteUploadImage","close","state","tags","playerIds","groupIds","gameIds","uploading","then","imageObject","showSuccess","setTimeout","catch","showError","handleNewPlayerChange","taggedPlayerId","removePlayerTag","playerId","filter","id","tagPlayer","push","group","availablePlayersToTag","players","p","includes","length","initialState","gameId","game","games","find","g","playersData","this","groupName","gameDate","tagedPlayers","name","date","AsGameName","map","onClick","tagPlayers","setImmediate","comboVals","player","value","onChange","className","disabled","type","accept","alt","src","message","Component","data","provider","token","a","Promise","resolve","reject","options","url","URL_PREFIX","method","body","JSON","stringify","headers","console","log","request","error","response","statusCode","bodyObj","parse","title","userContextString","userContext","decodeURI","registerSubscription","unregisterSubscription","isSubscribed","swRegistration","pushSupported","subscription","localStorage","getItem","setItem","removeItem","navigator","window","serviceWorker","register","swReg","warn","IsSubscribed","IsPushSupported","subscribeUser","applicationServerKey","base64String","base64","repeat","replace","rawData","atob","outputArray","Uint8Array","i","charCodeAt","urlB64ToUint8Array","pushManager","subscribe","userVisibleOnly","updateSubscriptionOnServer","unsubscribeUser","getSubscription","updateUnsubscriptionOnServer","unsubscribe","location","origin","Loader","heart","spade","diamond","club","version","GrayBubbleButton","classList","remove","add","children","NewGroupForm","handleGroupItemChange","attributeName","newValue","cancel","showMenu","onCancel","logout","delete","getHeader","menuItems","update","menuIcon","fontSize","anchorEl","document","getElementById","keepMounted","open","onClose","description","isUpdate","header","isLegalGroup","placeholder","saveGroup","deleteGroup","GreenBubbleButton","notificationHelper","Date","prototype","stringValue","toISOString","substr","day","month","year","AsExactTime","String","hours","moment","toDate","App","onNotificationButtonClick","subscribed","isAuthenticated","user","events","createGroup","showGroupCreationForm","showGroupEditForm","onFailure","backToMainPage","onLogin","groups","loading","setInterval","keepAlive","updateExistingGroup","updateGroup","newGroup","createNewGroup","delGroup","groupId","confirm","deletedGroupId","goHome","showGroupPage","showGroup","userInGroup","getGroupData","balance","gamesCount","play","cashOut","buyIn","sort","b","invitationRequested","alert","requestInvitation","editGroup","createGame","showCreateGameForm","createPlayer","showCreatePlayerForm","updatePlayerData","exist","updatePlayerRemoved","updateGame","removeGame","images","im","removeImage","imageId","search","siteUnderConstruction","answer","requestedGroupId","playersOptions","gamesOptions","imagesOptions","results","introJs","require","UserGroups","getUserGroupsDiv","myGroups","getGroupsDiv","showAddGroupItem","getOtherGroupsDiv","otherGroups","onKeyChange","tabKey","imageIndex","imagesCount","clearGamesTabSelections","start","groupsItems","style","backgroundImage","imageUrl","getImage","borderRadiusTop","isAdmin","playersCount","isMobile","test","userAgent","defaultActiveKey","activeKey","onSelect","variant","eventKey","getGame","gameData","deleteGame","defaults","ANON_URL","GREEN","RED","TRANSPARENT","getElementsByTagName","Width","innerWidth","documentElement","clientWidth","Height","innerHeight","clientHeight","SmartPhone","ImageSlider","index","relevantImages","items","taggedGame","taggedPlayers","join","original","thumbnail","sizes","ref","sleep","time","acc","playersItem","scrollIntoView","click","playerItem","scrollTo","goToPlayerPage","colors","CONSTS","Size","GameData","createPlayersDataAsFakeGame","max","minIndex","maxIndex","showSummaryByMoney","balances","totalGamesCounts","fourMonthMinIndex","sortedGames","slice","forEach","hasOwnProperty","mvpPlayerId","playersCountText","Object","keys","lastFourMonthGamesCount","percentage","undefined","Math","floor","item","prop","yearsObject","getYear","to","from","sliderValues","min","Game","IsGroupSummary","isPlaying","playerInfo","playerWidth","margin","isLoggedInPlayer","isMe","key","imgWidth","ImgStyleObject","width","height","marginRight","border","playerName","onError","ev","secondTry","first","playerData","displayName","trim","indexOf","split","styleObject","newSliderValues","playersInfo","playerObject","dif","val","d","hasNegatives","PlayerImages","getPlayerImage","PlayerNames1","getNamesSection","PlayerNames2","CurrencySign","PlayerBalance","PlayerGameCount","PlayerPercentages","PlayerRankingBalance","maxPositive","positiveRatio","GamePlayerPositives","barsStyleObject","marginTop","maxNegative","negativeRatio","GamePlayerNegatives","playersIdsToGamesCountObjMapper","playersIdsToBalanceObjMapper","filterGames","playersToShow","color","playersIdsToNameObjMapper","zeros","prevData","gamePlayers","prevValue","lines","dataKey","stroke","menu","yearsButtons","newState","playStopButton","innerNewState","graph","strokeDasharray","y","label","gamesDates","updateAfterSwitch","step","formatLabel","maxValue","minValue","getMappings","positivePlayers","negativePlayers","amount","Error","intersection","_","intersectionBy","mapping","negativePlayer","negative","positive","firstNegative","firstPositive","getWhoOweWhoMapping","gamePlayersData","WhoOwesWho","mappings","GameSummary","showWhoOwesWho","shouldShowWhoOwesWho","getGamePot","reduce","all","one","gameDateToString","addLeaddingZero","num","str","isoDate","parseInt","back","edit","RedBubbleButton","deleteImage","ImageData","showSuccessDeleteImage","showErrorOnDeleteImage","uploadedByName","uploadedById","curentUserId","canDelete","ShowErrorAlert","ShowSuccessAlert","base64image","playerImage","resizebase64","postImage","ImagesTab","showImageUploaderForm","showImageUploader","hideImageUploaderForm","enterImagePage","selectedImage","closeImagePage","IMAGES","OnGoingGame","createPlayerRow","groupPlayers","bottomLine","buyInValue","cashOutValue","bottomLineValue","imgHeight","imageStyle","getPlayersDataAsList","inOuts","extra","buyIns","bi","text","cashOuts","co","inouts","timeText","getAsPokerTable","bluesCount","hasBlue","greensCount","hasGreen","blacksCount","hasBlack","redsCount","hasRed","greysCount","hasGrey","playerA","playerB","onEditClicked","onGameEditClick","onBackClicked","interval","clearInterval","onBack","render","totalCashouts","pd","total","totalBuyIn","mobilePlayers","updateOnProgressGame","deleteSelectedGame","NewGameForm","handleNewGameDateChange","event","newGame","handleNewGameDescriptionChange","createNewGame","remoteCreateGame","updateGroupGame","legal","EditGameForm","updateSelectedGamePlayerData","editGame","editPlayerInGame","getEditPlayerInGame","maxBuyInRange","maxCashOutRange","updateSelectedGame","imageUploaderData","findPlayerNotInGame","PLAYERS","GAME_PLAYERS","playa","existingPlayerId","addCurrentPlayerToGame","remoteUpdateGame","handleEditGameDateChange","handleEditGameDescriptionChange","getGameDiff","removePlayerFromGame","editGamePlayer","gameSummary","playerImageUrl","ready","diff","ShowAlert","useAlert","show","GamesTab","clearAll","showCreateGame","substring","closeCreateGameForm","closeEditGameForm","showGameData","onGoingGameId","remoteDeleteGame","removeGroupGame","showErrorOnDeleteGame","showSuccessDeleteGame","getGamesSummary","setClearAll","GAMES","mvpPlayerData","mvpName","mvpBalance","mvpImageUrl","pot","mvp","mvpBottomLine","firstName","familyName","backgroundSize","backgroundRepeat","backgroundPosition","backgroundBlendMode","updatePlayer","deletePlayer","PlayerSummary","playerGames","x","firstGame","playerGamesDivs","playerBalance","rangeBalance","gameObject","email","baseUrl","FULL_ANON_URL","PlayersTab","newPlayer","editPlayer","playerSummary","setupPlayers","showPlayerData","showCreatePlayer","onPlayerEditClick","onPlayerDeleteClick","createNewPlayer","getNewPlayerSection","saveEditedPlayer","reload","res","newImageUrl","getPlayerEdit","GroupPage","clearPlayersTabSelections","MenuItem","Menu","getNewGameSection","Tabs","Tab","func","generalRequest","Postman","newStateTabs","tabs","tabData","newTabs","sendRequest","login","isHttps","protocol","showFB","tryConnectToFB","Login","performLogin","authData","issueDate","facebookResponse","accessToken","googleResponse","fbButton","getTime","google","clientId","onSuccess","renderProps","facebook","disableMobileRedirect","appId","autoLoad","fields","callback","position","positions","BOTTOM_CENTER","timeout","offset","transition","transitions","SCALE","Root","template","AlertTemplate","ReactDOM","success"],"mappings":"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","file":"static/js/main.ad6e7d9d.chunk.js","sourcesContent":["\n\nimport React, { Component } from 'react';\n\nimport ShowErrorAlert from '../containers/ShowErrorAlert';\nimport ShowSuccessAlert from '../containers/ShowSuccessAlert';\nimport GrayBubbleButton from '../containers/GrayBubbleButton';\nimport GreenBubbleButton from '../containers/GreenBubbleButton';\nimport RedBubbleButton from '../containers/RedBubbleButton';\nclass ImageUploader extends Component {\n\n    constructor(props) {\n        super(props);\n        const initialState = {\n            taggedPlayerId: null,\n            image: null,\n            playerIds: [],\n            groupIds: [],\n            gameIds: [],\n            showError: null,\n            showSuccess: null,\n            uploading:false\n        };\n\n        if (props.group){\n            initialState.groupIds = [props.group.id]\n        }\n\n        if (props.gameId){\n            initialState.gameIds = [props.gameId]\n        }\n        if (props.group && props.gameId){\n            const game = props.group.games.find(g => g.id === props.gameId);\n\n            if (game && game.playersData && game.playersData.length >0){\n                initialState.taggedPlayerId = game.playersData[0].playerId;\n            }\n        }\n\n        this.state = initialState;\n    }\n\n    onReaderLoad = (e) => {\n        this.setState({ image: e.target.result });\n    }\n\n    readURL = (e) => {\n        e.preventDefault();\n        if (e.target.files && e.target.files[0]) {\n            const reader = new FileReader();\n            reader.onload = this.onReaderLoad;\n            reader.readAsDataURL(e.target.files[0]);\n        }\n    }\n\n    uploadImage = () =>{\n        const { updateImage, uploadImage: remoteUploadImage, close } = this.props;\n        const { image, playerIds, groupIds, gameIds } = this.state;\n        const tags = {\n            playerIds,\n            groupIds,\n            gameIds\n        };\n        this.setState({ uploading: true })\n        remoteUploadImage(image, tags).then((imageObject)=>{\n            this.setState({ showSuccess: true, uploading: false});\n            updateImage(imageObject);\n            setTimeout(()=>{\n\n                close();\n            },10)\n\n        }).catch(()=>{\n\n            this.setState({ showError: true, uploading: false});\n            setTimeout(()=>{\n                this.setState({ showError: null});\n                close();\n            },10)\n        })\n\n    };\n\n    handleNewPlayerChange = (taggedPlayerId)=> {\n        this.setState({taggedPlayerId});\n    };\n\n    removePlayerTag = (playerId) =>{\n        const playerIds = [...this.state.playerIds].filter(id => id !== playerId);\n        this.setState({playerIds});\n    }\n\n    tagPlayer = () =>{\n        if (!this.state.taggedPlayerId){\n            return;\n        }\n        const playerIds = [...this.state.playerIds];\n        playerIds.push(this.state.taggedPlayerId);\n\n        let taggedPlayerId = null;\n        if (this.props.group){\n            const availablePlayersToTag = this.props.group.players.filter(p=> !playerIds.includes(p.id));\n\n            if (availablePlayersToTag.length > 0){\n                taggedPlayerId = availablePlayersToTag[0].id;\n            }\n        }\n\n        this.setState({taggedPlayerId, playerIds});\n    };\n\n    render() {\n\n       const { showError, showSuccess, uploading} = this.state;\n\n        const { group } = this.props;\n        const { image, groupIds, gameIds, playerIds } = this.state;\n        let groupName = '';\n        let gameDate = '';\n        let tagedPlayers = [];\n        if (group && groupIds[0] === group.id) {\n            groupName = group.name;\n        }\n        if (gameIds.length === 1){\n            const game = group.games.find(g => g.id === gameIds[0]);\n            gameDate = game ? game.date.AsGameName() : '';\n        }\n        if (group && playerIds.length > 0){\n            tagedPlayers = group.players.filter(p=> playerIds.includes(p.id)).map(p=>{\n                return <ul key={`_tag_${p.id}`}>{p.name} <button onClick={()=>this.removePlayerTag(p.id)} >remove tag</button></ul>\n            });\n        }\n\n        let tagPlayers = <div/>;\n        if (group && image) {\n           const availablePlayersToTag = group.players.filter(p => !playerIds.includes(p.id)).map(p=> ({ id:p.id, name:p.name }));\n           if (availablePlayersToTag.length >0) {\n               if (!this.state.taggedPlayerId){\n                  setImmediate(()=> this.setState({ taggedPlayerId: availablePlayersToTag[0].id }));\n               }\n\n               const comboVals = availablePlayersToTag.map(player =>\n                   (\n                       <option key={`_x_comboVals_${player.id}`} value={player.id}>\n                           { player.name }\n                       </option>\n                   )\n               );\n               tagPlayers = (\n                   <div>\n                       <div>\n                           add players tags:\n                       </div>\n                       <select name=\"player\" value={this.state.taggedPlayerId || ''} onChange={(e)=>this.handleNewPlayerChange(e.target.value)}>\n                           {comboVals}\n                       </select>\n                       <GrayBubbleButton className=\"button left-margin\" disabled={!this.state.taggedPlayerId} onClick={this.tagPlayer}> Tag player</GrayBubbleButton>\n               </div>);\n\n\n           }\n\n\n\n        }\n\n\n        // eslint-disable-next-line\n        return (\n            <div id=\"image-uploader\">\n\n                <div>\n                    <div>\n                        choose image:\n                    </div>\n                    <div>\n                        <input type=\"file\" accept=\".png,.jpg,.jpeg\" id=\"imgInput\" onChange={this.readURL}/>\n                    </div>\n                    <div>\n                        {image && <img alt=\"image\" id='image-uploader-preview' src={image}/>}\n                    </div>\n                    {!image &&  <div>\n                       no image selected yet\n                    </div> }\n                </div>\n                {groupIds.length > 0 && <div> Tagging the group ({groupName})</div>}\n                {gameIds.length > 0 && <div> Tagging the game ({gameDate})</div>}\n                {playerIds.length > 0 && <div> Tagging players:</div>}\n                {tagedPlayers.length > 0 && <div> {tagedPlayers}</div>}\n                <hr/>\n                {tagPlayers}\n                <div>\n                    { uploading && <div>please wait..</div>}\n                    <GreenBubbleButton className=\"button\" disabled={!image || uploading} onClick={this.uploadImage}> Upload </GreenBubbleButton>\n                </div>\n\n                <div>\n                    <GrayBubbleButton className=\"button\" disabled={uploading} onClick={this.props.close}> cancel </GrayBubbleButton>\n                </div>\n\n                { showError && <ShowErrorAlert message={\"failed to upload image\"}/>}\n                { showSuccess && <ShowSuccessAlert message={\"image uploaded successfully\"}/>}\n            </div>\n        );\n\n    }\n}\n\nexport default ImageUploader;\n\n","\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function registerSubscription(data, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      url: `${URL_PREFIX}/notifications`,\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n    console.log('registerSubscription', options.method, options.url, options.body);\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to registerSubscription , server might be down');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('request cb error body', bodyObj);\n        return reject(bodyObj.title);\n      }\n\n      if (response && response.headers && response.headers['x-user-context']) {\n        const userContextString = response.headers['x-user-context'];\n        const userContext = JSON.parse(decodeURI(userContextString));\n        const data = JSON.parse(body);\n        console.log('got data:', data);\n        return resolve({\n          data, userContext, provider, token,\n        });\n      }\n      console.error('request cb no header');\n\n      return reject('server response is missing the user context');\n    });\n  });\n}\n\nexport default registerSubscription;\n","\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function unregisterSubscription(data, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      url: `${URL_PREFIX}/notifications`,\n      method: 'DELETE',\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n    console.log('unregisterSubscription', options.method, options.url, options.body);\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to unregisterSubscription , server might be down');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('request cb error body', bodyObj);\n        return reject(bodyObj.title);\n      }\n\n      if (response && response.headers && response.headers['x-user-context']) {\n        const userContextString = response.headers['x-user-context'];\n        const userContext = JSON.parse(decodeURI(userContextString));\n        const data = JSON.parse(body);\n        console.log('got data:', data);\n        return resolve({\n          data, userContext, provider, token,\n        });\n      }\n      console.error('request cb no header');\n\n      return reject('server response is missing the user context');\n    });\n  });\n}\n\nexport default unregisterSubscription;\n","/* eslint-disable no-undef */\n/* eslint-disable no-console */\n/* eslint-disable no-shadow */\n/* eslint-disable no-mixed-operators */\n/* eslint-disable no-useless-escape */\nimport registerSubscription from './actions/registerSubscription';\nimport unregisterSubscription from './actions/unregisterSubscription';\n\nconst applicationServerPublicKey = 'BIzamkxmxtu3jgxzUVL3Pg7AKbbxv2y8dLPPePT6fxXVI9Nl4wBJJpGeTAEofw0etXweRs8COyNrRJ5Aw2lhmXg';\nlet isSubscribed = false;\nlet swRegistration = null;\nlet pushSupported = true;\nfunction urlB64ToUint8Array(base64String) {\n  const padding = '='.repeat((4 - base64String.length % 4) % 4);\n  // eslint-disable-next-line\n  const base64 = (base64String + padding)\n    .replace(/\\-/g, '+')\n    .replace(/_/g, '/');\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nlet subscription = localStorage.getItem('subscription');\nif (subscription) {\n  subscription = JSON.parse(subscription);\n  isSubscribed = true;\n}\n\nif ('serviceWorker' in navigator && 'PushManager' in window) {\n  // console.log('Service Worker and Push is supported');\n\n  navigator.serviceWorker.register('service-worker.js')\n    .then((swReg) => {\n      // console.log('Service Worker is registered', swReg);\n\n      swRegistration = swReg;\n    })\n    .catch((error) => {\n      console.error('Service Worker Error', error);\n      pushSupported = false;\n    });\n} else {\n  console.warn('Push messaging is not supported');\n  pushSupported = false;\n}\nasync function updateSubscriptionOnServer(subscription, provider, token) {\n  await registerSubscription(subscription, provider, token);\n  localStorage.setItem('subscription', JSON.stringify(subscription));\n}\n\nasync function updateUnsubscriptionOnServer(subscription, provider, token) {\n  await unregisterSubscription(subscription, provider, token);\n  localStorage.removeItem('subscription');\n}\n\nfunction subscribeUser(provider, token) {\n  if (isSubscribed || !pushSupported) {\n    return;\n  }\n  const applicationServerKey = urlB64ToUint8Array(applicationServerPublicKey);\n  return swRegistration.pushManager.subscribe({\n    userVisibleOnly: true,\n    applicationServerKey,\n  })\n    .then((subscription) => {\n      // console.log('User is subscribed.');\n\n      updateSubscriptionOnServer(subscription, provider, token);\n      // console.log('user is subscribed to push notifications');\n      isSubscribed = true;\n    });\n}\n\nfunction unsubscribeUser(provider, token) {\n  // console.log('unsubscribeUser');\n  localStorage.removeItem('subscription');\n  if (!isSubscribed) {\n    return;\n  }\n  return swRegistration.pushManager.getSubscription()\n    .then((subscription) => {\n      if (subscription) {\n        updateUnsubscriptionOnServer(subscription, provider, token);\n        return subscription.unsubscribe();\n      }\n    });\n}\n\nfunction IsSubscribed() {\n  // console.log('IsSubscribed()', isSubscribed);\n  return isSubscribed;\n}\nfunction IsPushSupported() {\n  return pushSupported;\n}\nexport default {\n  IsSubscribed,\n  IsPushSupported,\n  subscribeUser,\n  unsubscribeUser,\n};\n","/* eslint-disable no-undef */\n/* eslint-disable import/no-mutable-exports */\nlet URL_PREFIX = `${window.location.origin}/api/v2`;\nif (URL_PREFIX === 'http://localhost:3000/api/v2') {\n  URL_PREFIX = 'http://www.poker-stats.com/api/v2';\n}\nexport default URL_PREFIX;\n","\nimport React, { Component } from 'react';\nimport { version } from '../../package.json';\nexport default class Loader extends Component {\n    render() {\n        const heart =  <i className=\"emSvgSize em-svg em-hearts\"></i>;\n        const spade =  <i className=\"emSvgSizeBigger em-svg em-spades\"></i>;\n        const diamond =<i className=\"emSvgSizeBigger em-svg em-diamonds\"></i>;\n        const club =   <i className=\"emSvgSizeBigger em-svg em-clubs\"></i>;\n\n        return  (\n            <div id=\"loader\">\n                <div className=\"app-version\">V.{version}</div>\n                <div className=\"loader\">\n                    <span id=\"loaderSpan1\" className=\"loaderSpan\">{heart}</span>\n                    <span id=\"loaderSpan2\" className=\"loaderSpan\">{spade}</span>\n                    <span id=\"loaderSpan3\" className=\"loaderSpan\">{diamond}</span>\n                    <span id=\"loaderSpan4\" className=\"loaderSpan\">{club}</span>\n                </div>\n            </div>\n    );\n    }\n}\n","import React from 'react'\n\nconst GrayBubbleButton = (props) => {\n\n    return (\n        <button {...props} className={`${props.className} confetti-button confetti-button-gray`} onClick={(e)=>{\n            e.preventDefault();\n            //reset animation\n            try {\n                e.target.classList.remove('animate');\n            } catch (e) {\n            }\n\n            try {\n                e.target.classList.add('animate');\n            } catch (e) {\n            }\n            setTimeout(function(){\n                try {\n                    e.target.classList.remove('animate');\n                } catch (e) {\n                }\n            },700);\n            setTimeout(function(){\n                try {\n                    props.onClick(e);\n                } catch (e) {\n                }\n            },500);\n\n        }} > {props.children}</button>\n    )\n\n\n}\n\nexport default GrayBubbleButton;\n","/* eslint-disable no-lone-blocks */\nimport React, { Component } from 'react';\n\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport GrayBubbleButton from '../containers/GrayBubbleButton';\nimport GreenBubbleButton from '../containers/GreenBubbleButton';\nimport RedBubbleButton from '../containers/RedBubbleButton';\nimport { version } from '../../package.json';\n\nclass NewGroupForm extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showMenu:false,\n            error: null,\n            group:props.group || {\n                name: '',\n                description: ''\n            },\n            update: props.isUpdate\n        };\n    }\n\n    handleGroupItemChange = (attributeName, newValue) => {\n        const group = { ...this.state.group, [attributeName]: newValue };\n        this.setState({ group });\n    };\n\n    cancel = () => {\n        this.setState({showMenu: false});\n        this.props.onCancel();\n    };\n    logout = () => {\n        this.setState({showMenu: false});\n        this.props.logout();\n    };\n\n    delete = () => {\n        this.setState({showMenu: false});\n        this.props.delete(this.state.group.id)\n    };\n\n    // eslint-disable-next-line\n    getHeader = ()=>{\n\n        const menuItems = [];\n\n        menuItems.push(<MenuItem key=\"menuItem1\" onClick={this.cancel}>Cancel</MenuItem>)\n        if (this.state.update){\n            menuItems.push(<MenuItem key=\"menuItem3\" onClick={this.delete} >Delete</MenuItem>)\n        }\n\n        menuItems.push(<MenuItem key=\"menuItem5\" onClick={this.logout}>Logout</MenuItem>)\n        menuItems.push(<MenuItem key=\"menuItem6\" onClick={()=>{}}><div><hr/> <span className=\"version-menu-item-text\">version: </span><span className=\"version-menu-item-number\">{version}</span></div></MenuItem>);\n\n\n        const menuIcon =  <MenuIcon id=\"menuIcon\" fontSize=\"inherit\" className='menu-icon' onClick={()=>this.setState({showMenu: !this.state.showMenu})} />;\n        return  <div id=\"app-header\">\n            {menuIcon}\n\n            {this.state.showMenu &&\n            <Menu\n                id=\"simple-menu\"\n                anchorEl={ ()=>document.getElementById(\"menuIcon\") }\n                keepMounted\n                open={true}\n                onClose={()=>this.setState({showMenu: !this.state.showMenu})}\n            >\n\n                {menuItems}\n\n            </Menu>}\n\n            <span id=\"app-header-text\">{this.state.update ? 'Update': 'Create'} Group</span>\n        </div>\n    };\n\n    render() {\n        const header = this.getHeader();\n        const isLegalGroup = this.state.group.name.length > 0;\n\n        return (\n            <div id=\"create-group-form container\">\n                {header}\n                <div id=\"create-group-form-wrapper\">\n                    <div className=\"row\">\n                        <span className=\"new-group-form-item-label\">Name*</span>\n                    </div>\n                    <div className=\"row\">\n                        <input type=\"text\" placeholder=\"Enter group name\" id=\"newGroupTitle\" className=\"formTextInput-full-width\" value={this.state.group.name} onChange={(e) => this.handleGroupItemChange('name', e.target.value)} />\n                    </div>\n                    <div className=\"row\">\n                        <span className=\"new-group-form-item-label\">Description</span>\n                    </div>\n                    <div className=\"row\">\n                        <input type=\"text\" placeholder=\"Enter description\" id=\"newGroupDescription\" className=\"formTextInput-full-width\" value={this.state.group.description} onChange={(e) => this.handleGroupItemChange('description', e.target.value)} />\n                    </div>\n\n                    <div className=\"row top-margin\">\n                        <GrayBubbleButton className=\"button left-pad\"  onClick={this.props.onCancel}> Cancel </GrayBubbleButton>\n\n                        <GreenBubbleButton className=\"button left-pad left-margin\" onClick={()=>this.props.saveGroup(this.state.group)} disabled={!isLegalGroup}>{this.state.update ? 'update' : 'save'}</GreenBubbleButton>\n                        { this.state.update && <RedBubbleButton className=\"button left-pad left-margin\" onClick={()=>this.props.deleteGroup(this.state.group.id)} disabled={!isLegalGroup}> delete</RedBubbleButton>}\n                    </div>\n\n\n                </div>\n            </div>\n        );\n\n    }\n}\n\nexport default NewGroupForm;\n\n","import React from 'react'\nconst GreenBubbleButton = (props) => {\n    return (\n        <button {...props} className={`${props.className} confetti-button confetti-button-green`} onClick={(e)=>{\n                e.preventDefault();\n                //reset animation\n            try {\n                e.target.classList.remove('animate');\n            } catch (e) {\n            }\n\n            try {\n                e.target.classList.add('animate');\n            } catch (e) {\n            }\n                setTimeout(function(){\n                    try {\n                        e.target.classList.remove('animate');\n                    } catch (e) {\n                    }\n                },700);\n                setTimeout(function(){\n                    try {\n                        props.onClick(e);\n                    } catch (e) {\n                    }\n                },500);\n\n        }} > {props.children}</button>\n    )\n}\n\nexport default GreenBubbleButton;\n","/* eslint-disable no-lone-blocks */\n/* eslint-disable no-restricted-globals */\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport keepAlive from './actions/keepAlive';\nimport createGroup from './actions/createGroup';\nimport updateGroup from './actions/updateGroup';\nimport deleteGroup from './actions/deleteGroup';\nimport requestInvitation from './actions/requestInvitation';\nimport getGroupData from './actions/getGroupData';\nimport Postman from './components/Postman';\nimport Login from './components/Login';\nimport NewGroupForm from './components/NewGroupForm';\nimport GroupPage from './components/GroupPage';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Loading from './containers/Loading';\nimport UserGroups from \"./components/UserGroups\";\n\nimport notificationHelper from \"./notificationHelper\";\nimport {version} from \"../package.json\";\n\nconst {IsSubscribed, IsPushSupported, subscribeUser,unsubscribeUser} = notificationHelper;\n\nconst KEEP_ALIVE_INTERVAL = 1000 * 60 * 5;\n\n// eslint-disable-next-line\nDate.prototype.AsGameName = function() {\n    const stringValue = this.toISOString().substr(0,10);\n    const day = stringValue.substr(8,2);\n    const month = stringValue.substr(5,2);\n    const year = stringValue.substr(0,4);\n    return `${day}/${month}/${year}`;\n};\n\n// eslint-disable-next-line\nDate.prototype.AsExactTime = function() {\n    return this.toISOString().substr(11,5);\n};\n// eslint-disable-next-line\nString.prototype.AsGameName = function() {\n    const date = new Date(this);\n    return date.AsGameName()\n};\n\n// eslint-disable-next-line\nString.prototype.AsExactTime = function(hours) {\n    return moment(this).add(hours, 'hours').toDate().AsExactTime()\n};\n\n\nclass App extends Component {\n\n    constructor() {\n        super();\n\n        this.state = {\n            showMenu:false,\n            subscribed:IsSubscribed(),\n            showGroupCreationForm: false,\n            showCreateGameForm:false,\n            showCreatePlayerForm:false,\n            showGroupEditForm: null,\n            loading: false,\n            isAuthenticated: false,\n            user: null,\n            groups:null,\n            provider:'',\n            error:null,\n            token:null,\n            showGroupPage: null\n        };\n    }\n\n    onNotificationButtonClick = async() =>{\n        try {\n            console.log('onNotificationButtonClick this.state.subscribed', this.state.subscribed)\n            if (this.state.subscribed) {\n                await unsubscribeUser(this.state.provider, this.state.token);\n                this.setState({subscribed:false, showMenu: false})\n            } else {\n                await subscribeUser(this.state.provider, this.state.token);\n                this.setState({subscribed:true, showMenu: false})\n            }\n        } catch (e) {\n            console.log('onNotificationButtonClick Error', e)\n        }\n\n    };\n\n    logout = () => {\n        localStorage.removeItem('authData');\n        this.setState({isAuthenticated: false, user: null, events:[], error:null, showMenu:false})\n        window.location.replace('https://www.poker-stats.com');\n\n    };\n\n    createGroup = () => {\n        this.setState({ showGroupCreationForm: true, error:null, showMenu: false})\n    };\n\n    onCancel = () => {\n        console.log('onCancel')\n        this.setState({ showGroupCreationForm: false,showGroupEditForm:null, error:null, showMenu: false})\n    };\n\n    onFailure = (error) => {\n        console.error('App onFailure', error);\n        this.setState({error })\n    };\n\n    backToMainPage = () => {\n        this.setState({group:null, players:null,games:null,error:null});\n    };\n\n    onLogin = async ({userContext, provider, token, groups}) => {\n        this.setState({user: userContext, groups, loading: false, isAuthenticated: true, error:null, provider, token})\n        setInterval(keepAlive, KEEP_ALIVE_INTERVAL)\n    };\n\n    getHeader = ()=>{\n\n\n        const menuItems = [];\n        if (IsPushSupported()){\n            menuItems.push( <MenuItem key=\"menuItem1\" onClick={this.onNotificationButtonClick}>{ this.state.subscribed ? 'disable':'enable'} notifications</MenuItem> )\n        }\n        menuItems.push(<MenuItem key=\"menuItem2\" onClick={this.createGroup}>Create New Group</MenuItem>)\n        menuItems.push(<MenuItem key=\"menuItem3\" onClick={this.logout}>Logout</MenuItem>)\n        menuItems.push(<MenuItem key=\"menuItem6\" onClick={()=>{}}><div><hr/> <span className=\"version-menu-item-text\">version: </span><span className=\"version-menu-item-number\">{version}</span></div></MenuItem>);\n\n\n        const menuIcon =  <MenuIcon id=\"menuIcon\" fontSize=\"inherit\" className='menu-icon' onClick={()=>this.setState({showMenu: !this.state.showMenu})} />;\n        return  <div id=\"app-header\">\n            {menuIcon}\n\n            {this.state.showMenu &&\n            <Menu\n                id=\"simple-menu\"\n                anchorEl={ ()=>document.getElementById(\"menuIcon\") }\n                keepMounted\n                open={true}\n                onClose={()=>this.setState({showMenu: !this.state.showMenu})}\n            >\n\n                {menuItems}\n\n            </Menu>}\n\n\n\n            <span id=\"app-header-text\"><img src=\"pokerStatsLogoWithSheep.png\" className=\"sheep-logo\" alt=\"\"/> Groups</span>\n        </div>\n    };\n\n    updateExistingGroup = (group) =>{\n        this.setState({ loading: true, error: null});\n        setImmediate(async ()=>{\n            try {\n                const newGroup = await updateGroup(group.id, group, this.state.provider, this.state.token);\n                const groups = [newGroup, ...this.state.groups];\n                this.setState({ loading: false, groups,  showGroupEditForm:null, showGroupCreationForm:null});\n            } catch (error) {\n                this.setState({ loading: false, error,  showGroupEditForm:null, showGroupCreationForm:null});\n            }\n        })\n    }\n    createNewGroup = (group) =>{\n        setImmediate(async ()=>{\n            try {\n                const newGroup = await createGroup(group, this.state.provider, this.state.token);\n                const groups = [newGroup, ...this.state.groups];\n                this.setState({ loading: false, groups});\n            } catch (error) {\n                this.setState({ loading: false, error});\n            }\n        })\n    }\n\n    saveGroup = (group)=>{\n        this.setState({ showGroupCreationForm: false, error:null, loading: true});\n        if (group.id){\n            this.updateExistingGroup(group)\n        } else{\n            this.createNewGroup(group)\n        }\n\n\n    };\n\n    delGroup = (groupId)=>{\n        if (confirm(\"Are you sure?\")){\n            this.setState({ error:null, loading: true});\n            setImmediate(async ()=>{\n                try {\n                    const deletedGroupId = await deleteGroup(groupId, this.state.provider, this.state.token);\n                    const groups = this.state.groups.filter(group=>(group.id !== deletedGroupId));\n                    this.setState({ loading: false, groups,  showGroupEditForm:null, showGroupCreationForm:null });\n\n                } catch (error) {\n                    console.error('error calling delete',error)\n                    this.setState({ loading: false, error,  showGroupEditForm:null, showGroupCreationForm:null});\n                }\n            })\n        }else{\n            this.setState({ showGroupEditForm:null, showGroupCreationForm:null });\n        }\n    };\n\n    goHome = () =>{\n        this.setState({ showMenu:false, showGroupCreationForm: false, loading: false, showGroupPage: null, showGroupEditForm:null});\n    };\n\n    showGroup = async (group) =>{\n        if (group.userInGroup){\n            this.setState({showMenu:false, loading:true});\n            getGroupData(group, this.state.provider, this.state.token).then((g)=>{\n\n                g.players = g.players.map(player=>{\n                    let balance = 0;\n                    const playersGames = g.games.filter(game=> {\n                        const play = game.playersData.find(data => data.playerId === player.id);\n                        if (play){\n                            balance += play.cashOut;\n                            balance -= play.buyIn;\n                        }\n                        return play;\n                    });\n                    const gamesCount = playersGames.length;\n\n                    return {...player, gamesCount, balance};\n                }).sort((a,b)=>  a.gamesCount === b.gamesCount ? ((a.balance > b.balance ? -1 : 1)) : (a.gamesCount > b.gamesCount ? -1 : 1));\n\n                this.setState({ showGroupPage: g, loading:false});\n            }).catch((e)=>{\n                this.setState({ error: e, loading:false});\n            })\n\n\n        } else{\n            if (group.invitationRequested){\n                this.setState({showMenu:false});\n                alert('invitation already requested. you will get an answer in your email.');\n            }else if (confirm(\"You sre not in this group. would you like to ask for an invitation?\")){\n               this.setState({loading:true});\n               requestInvitation(group.id, this.state.provider, this.state.token).then(()=>{\n                   this.setState({loading:false});\n               })\n            } else {\n                this.setState({showMenu:false});\n            }\n        }\n\n    };\n\n    editGroup = (group) =>{\n        console.log('editGroup')\n        this.setState({ showMenu:false, showGroupEditForm: group});\n    };\n\n    createGame = (group, game) =>{\n        this.setState({ showMenu:false, showCreateGameForm: { group, game }});\n    };\n    createPlayer = (group, player) =>{\n        this.setState({ showMenu:false, showCreatePlayerForm: { group, player }});\n    };\n\n    updatePlayerData = (player)=>{\n        console.log('updatePlayerData. new player data:', player);\n        const showGroupPage = {...this.state.showGroupPage, players: [...this.state.showGroupPage.players]};\n        let exist = false;\n        showGroupPage.players = showGroupPage.players.map(p=>{\n            if (p.id !== player.id) return p;\n            exist = true;\n            return player;\n        });\n        if (!exist){\n            showGroupPage.players.push(player)\n        }\n        console.log('updatePlayerData. state before:', this.state.showGroupPage);\n        console.log('updatePlayerData. state after:', showGroupPage);\n\n        this.setState({showGroupPage})\n    }\n\n    updatePlayerRemoved = (playerId)=>{\n        console.log('app removed player', playerId);\n        const showGroupPage = {...this.state.showGroupPage};\n        showGroupPage.players = showGroupPage.players.filter(p=> p.id !== playerId);\n\n        this.setState({showGroupPage})\n    }\n\n    updateGame = (game)=>{\n\n        const showGroupPage = {...this.state.showGroupPage};\n        let exist = false;\n        showGroupPage.games = showGroupPage.games.map(g=>{\n            if (g.id !== game.id) return g;\n            exist = true;\n            if (typeof game.date === 'string'){\n                game.date = new Date(game.date);\n            }\n            return game;\n        });\n        if (!exist){\n            if (typeof game.date === 'string'){\n                game.date = new Date(game.date);\n            }\n            showGroupPage.games.push(game)\n        }\n        this.setState({showGroupPage})\n    }\n    removeGame = (gameId)=>{\n        console.log('app game remove', gameId);\n        const showGroupPage = {...this.state.showGroupPage};\n        showGroupPage.games = showGroupPage.games.filter(g=>{\n            return (g.id !== gameId)\n        });\n        this.setState({showGroupPage})\n    }\n\n    updateImage = (image)=>{\n        const showGroupPage = {...this.state.showGroupPage};\n        let exist = false;\n        showGroupPage.images = showGroupPage.images.map(im=>{\n            if (im.id !== image.id) return im;\n            exist = true;\n            return im;\n        });\n        if (!exist){\n            showGroupPage.images = [image, ...showGroupPage.images]\n        }\n        this.setState({showGroupPage})\n    }\n    removeImage = (imageId)=>{\n        const showGroupPage = {...this.state.showGroupPage};\n        showGroupPage.images = showGroupPage.images.filter(im=>{\n            return (im.id !== imageId)\n        });\n        this.setState({showGroupPage})\n    }\n\n    render() {\n        const {loading, isAuthenticated, groups, showGroupCreationForm, showGroupPage, showGroupEditForm}  = this.state;\n        if (window.location.search && window.location.search.includes('postman')){\n            return <Postman/>;\n        }\n        if (loading){\n            return  <Loading/>;\n        }\n        if (!isAuthenticated){\n            return  <Login onLogin={this.onLogin} />;\n        }\n\n        if (showGroupEditForm){\n            return <NewGroupForm onCancel={this.onCancel} saveGroup={this.saveGroup} deleteGroup={this.delGroup} logout={this.logout} group={showGroupEditForm} isUpdate={true}/>;\n        }\n\n        if (showGroupPage){\n            return <GroupPage goHome={this.goHome}\n                              group={showGroupPage}\n                              user={this.state.user}\n                              updatePlayerRemoved={this.updatePlayerRemoved}\n                              updateGame={this.updateGame}\n                              updatePlayerData={this.updatePlayerData}\n                              editGroup={this.editGroup}\n                              deleteGroup={this.delGroup}\n                              removeGame={this.removeGame}\n                              updateImage={this.updateImage}\n                              removeImage={this.removeImage}\n                              provider={this.state.provider}\n                              token={ this.state.token} logout={this.logout}/>\n        }\n\n        if (showGroupCreationForm){\n            return  <NewGroupForm onCancel={this.onCancel} saveGroup={this.saveGroup} logout={this.logout}/>;\n        }\n        const ori= '4271b8f8-c447-4cdc-9ebf-c655e4811a4f';\n        const saar = 'cd5d8442-9d26-4e90-9ec9-454e880a2b4f';\n        const siteUnderConstruction = this.state.user && this.state.user.id === saar;\n\n        const header = this.getHeader();\n        return (\n            <div className=\"App container\">\n                <div className=\"errorSection\">\n                    {this.state.error}\n                </div>\n                {header}\n\n                <div className=\"MainSection\">\n                    { siteUnderConstruction ?\n\n                            <img id=\"site-under-construction-image\" src=\"https://res.cloudinary.com/www-poker-stats-com/image/upload/v1620552184/under.png\" alt=\"under-construction\"/>\n                        :\n                    <UserGroups createGroup={this.createGroup} groups={groups} showGroup={this.showGroup}  />\n                    }\n                </div>\n\n            </div>);\n\n    }\n}\n\nexport default App;\n\n","import request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function keepAlive() {\n  console.log('keep server Alive ');\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'GET',\n      url: `${URL_PREFIX}/keep-alive`,\n    };\n    request(options, (error, response, body) => {\n      const answer = JSON.parse(body);\n      return resolve(answer);\n    });\n  });\n}\n\nexport default keepAlive;\n","/* eslint-disable no-console */\n/* eslint-disable prefer-promise-reject-errors */\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function createGroup(group, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/groups`,\n      body: JSON.stringify(group),\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to create new group');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to create new group');\n        return reject(bodyObj.title);\n      }\n      return resolve(JSON.parse(body));\n    });\n  });\n}\n\nexport default createGroup;\n","\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function updateGroup(groupId, data, provider, token) {\n  console.log('updateGroup', groupId, data, provider, token);\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'PATCH',\n      url: `${URL_PREFIX}/groups/${groupId}`,\n      body: JSON.stringify(data),\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to update group');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to update group');\n        return reject(bodyObj.title);\n      }\n      return resolve(JSON.parse(body));\n    });\n  });\n}\n\nexport default updateGroup;\n","/* eslint-disable no-console */\n/* eslint-disable prefer-promise-reject-errors */\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function deleteGroup(groupId, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'DELETE',\n      url: `${URL_PREFIX}/groups/${groupId}`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to delete group');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to delete group');\n        return reject(bodyObj.title);\n      }\n      return resolve();\n    });\n  });\n}\n\nexport default deleteGroup;\n","\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function requestInvitation(groupId, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/invitations-requests/`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        requestedGroupId: groupId,\n      }),\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to requestInvitation', error);\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to requestInvitation', bodyObj);\n        return reject(bodyObj.title);\n      }\n      return resolve(JSON.parse(body));\n    });\n  });\n}\n\nexport default requestInvitation;\n","\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function getGroupData(group, provider, token) {\n  return new Promise((resolve, reject) => {\n    const playersOptions = {\n      method: 'GET',\n      url: `${URL_PREFIX}/groups/${group.id}/players/`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n    const gamesOptions = {\n      method: 'GET',\n      url: `${URL_PREFIX}/groups/${group.id}/games/`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n    const imagesOptions = {\n      method: 'GET',\n      url: `${URL_PREFIX}/groups/${group.id}/images/`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n    let images;\n    let players;\n    let games;\n\n    request(playersOptions, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get group players', error);\n          return reject('failed to get group data');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to get group players', bodyObj);\n        return reject(bodyObj.title);\n      }\n      players = JSON.parse(body).results;\n      if (players && games && images) {\n        const userContextString = response.headers['x-user-context'];\n        const userContext = JSON.parse(decodeURI(userContextString));\n        return resolve({\n          ...group, players, games, images, userContext,\n        });\n      }\n    });\n    request(gamesOptions, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get group games', error);\n          return reject('failed to get group data');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to get group games', bodyObj);\n        return reject(bodyObj.title);\n      }\n      games = (JSON.parse(body).results).map(game => ({\n        ...game,\n        date: new Date(game.date),\n      }));\n      if (players && games && images) {\n        const userContextString = response.headers['x-user-context'];\n        const userContext = JSON.parse(decodeURI(userContextString));\n\n        return resolve({\n          ...group, players, games, images, userContext,\n        });\n      }\n    });\n\n    request(imagesOptions, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get group images', error);\n          return reject('failed to get group data');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to get group images', bodyObj);\n        return reject(bodyObj.title);\n      }\n      images = JSON.parse(body).results;\n      if (players && games && images) {\n        const userContextString = response.headers['x-user-context'];\n        const userContext = JSON.parse(decodeURI(userContextString));\n\n        return resolve({\n          ...group, players, games, images, userContext,\n        });\n      }\n    });\n  });\n}\n\nexport default getGroupData;\n","\nimport React, { Component } from 'react';\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\nconst introJs = require('intro.js');\n\n\n\nclass UserGroups extends Component {\n\n    constructor() {\n        super();\n        this.imageIndex = 0;\n        this.imagesCount = 7;\n        this.clearGamesTabSelections = ()=>{};\n\n\n        this.state = { tabKey: 'myGroups' }\n    }\n\n\n    startIntro(){\n        introJs().start();\n    }\n    getImage(){\n\n        this.imageIndex++;\n\n        if (this.imageIndex > this.imagesCount) {\n            this.imageIndex = 1;\n        }\n        return `backgroundImage${this.imageIndex}.jpg`;\n    }\n\n    getGroupsDiv({ groups, showAddGroupItem}){\n\n        const groupsItems = groups.map((group) => {\n            const style = {\n                backgroundImage: `url(${group.imageUrl || this.getImage()})`,\n                borderRadiusTop: '50px',\n            };\n\n            return (<div key={group.id}  className={`group-item-div ${group.isAdmin ? 'group-item-div-admin' : ''}`}  onClick={()=>this.props.showGroup(group)}>\n                        <div key={group.id} className=\"group-item-div-inner\" style={style}>\n                            <div><b  className=\"text-shadow\">{group.name }</b></div>\n                            <div className=\"group-description text-shadow\">{group.userInGroup ? group.description : 'not in this group' }</div>\n\n                            <div className=\"my-group\">{group.userInGroup ? '' : (group.invitationRequested ? 'invitation was requested': 'click to ask for an invitation') }</div>\n\n                        </div>\n\n                        <div className=\"group-extra-data\">\n                            <div>\n                                {group.playersCount} players\n\n                            </div>\n                            <div>\n                                {group.gamesCount} games\n\n                            </div>\n                        </div>\n                    </div>);\n\n        });\n\n\n        return (<div id=\"user-groups\" className=\"row\">\n            { showAddGroupItem && (\n                <div className=\"row\">\n                    <div className=\"\">\n                        <div className=\"group-item-div\" onClick={this.props.createGroup}>\n                            <img src=\"plus.png\" className=\"group-item-div-plus-sign\"/>\n                        </div>\n                    </div>\n                </div>)}\n                {groupsItems}\n        </div>);\n\n\n    }\n\n    getUserGroupsDiv=()=>{\n        const groups = this.props.groups || [];\n        const myGroups = groups.filter(group => group.userInGroup);\n        return this.getGroupsDiv({ groups: myGroups, showAddGroupItem:true});\n    }\n\n\n    getOtherGroupsDiv = ()=>{\n        const groups = this.props.groups || [];\n        const otherGroups = groups.filter(group => !group.userInGroup);\n        return this.getGroupsDiv({ groups: otherGroups, showAddGroupItem:false});\n    }\n\n\n    onKeyChange = (tabKey) =>{\n        console.log('### tabKey',tabKey)\n       // this.clearGamesTabSelections();\n        this.setState({tabKey });\n    };\n    render() {\n        const isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\n\n        return  <div id=\"groups-page\"  >\n                    <Tabs defaultActiveKey=\"myGroups\" id=\"uncontrolled-tab-example\" style={{fontSize: isMobile ? \"0.8em\" : \"1em\"}} activeKey={this.state.tabKey} onSelect={this.onKeyChange} variant=\"pills\">\n                        <Tab eventKey=\"myGroups\" title=\"My Groups\" >\n                            {this.getUserGroupsDiv()}\n                        </Tab>\n                        <Tab eventKey=\"otherGroups\" title=\"Other Groups\" >\n                            {this.getOtherGroupsDiv()}\n                        </Tab>\n                    </Tabs>\n                </div>;\n    }\n}\n\nexport default UserGroups;\n\n\n","\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function getGame(groupId, gameId, provider, token) {\n  console.log('getGame ');\n\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'GET',\n      url: `${URL_PREFIX}/groups/${groupId}/games/${gameId}`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error.failed to get game data', error);\n          return reject('failed to get game data');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to get game data', bodyObj);\n        return reject(bodyObj.title);\n      }\n      const game = JSON.parse(body);\n      return resolve(game);\n    });\n  });\n}\n\nexport default getGame;\n","/* eslint-disable no-console */\n/* eslint-disable prefer-promise-reject-errors */\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\n\nasync function createGame(groupId, gameData, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/groups/${groupId}/games`,\n      body: JSON.stringify(gameData),\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to create new game');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to create new game');\n        return reject(bodyObj.title);\n      }\n      return resolve(JSON.parse(body));\n    });\n  });\n}\n\nexport default createGame;\n","\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function updateGame(groupId, gameId, data, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'PATCH',\n      url: `${URL_PREFIX}/groups/${groupId}/games/${gameId}`,\n      body: JSON.stringify(data),\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n    console.log('updateGame options', options);\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to update game');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to update game');\n        return reject(bodyObj.title);\n      }\n      return resolve(JSON.parse(body));\n    });\n  });\n}\n\nexport default updateGame;\n","/* eslint-disable no-console */\n/* eslint-disable prefer-promise-reject-errors */\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function deleteGame(groupId, gameId, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'DELETE',\n      url: `${URL_PREFIX}/groups/${groupId}/games/${gameId}`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to delete game');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to delete game');\n        return reject(bodyObj.title);\n      }\n      return resolve();\n    });\n  });\n}\n\nexport default deleteGame;\n","const ANON_URL = 'anonymous2.png';\nconst GREEN = 'green.png';\nconst RED = 'red.png';\nconst TRANSPARENT = 'transparent.png';\n\nconst defaults = {\n  ANON_URL,\n  GREEN,\n  RED,\n  TRANSPARENT,\n};\nexport default defaults;\n","/* eslint-disable no-undef */\nconst body = document.getElementsByTagName('body')[0];\nconst windowWidth = window.innerWidth || document.documentElement.clientWidth || body.clientWidth;\nconst Width = windowWidth;\nconst Height = window.innerHeight || document.documentElement.clientHeight || body.clientHeight;\nconst SmartPhone = (Width < 600);\n\nexport default {\n  Width,\n  Height,\n  SmartPhone,\n};\n","\nimport React, { Component } from 'react';\n\nclass ImageSlider extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {index: 0};\n\n        const {group, gameId, playerId} = props;\n        const {images, games, players} = group;\n\n        const relevantImages = images.filter(imageObject => {\n            if (gameId) {\n                return imageObject.gameIds.includes(gameId);\n            }\n            if (playerId) {\n                return imageObject.playerIds.includes(playerId);\n            }\n            return true;\n        });\n        this.items = relevantImages.map(imageObject => {\n            const taggedGame = games.find(game => imageObject.gameIds.includes(game.id));\n\n            const date = taggedGame ? taggedGame.date.AsGameName() : '';\n\n            const taggedPlayers = players.filter(player => imageObject.playerIds.includes(player.id)).map(player => player.name).join(',');\n            return {\n                original: imageObject.image,\n                thumbnail: imageObject.image,\n                date,\n                sizes: \"10vw\",\n                taggedPlayers\n            }\n        });\n\n\n        this.ref = setInterval(() => {\n            let index = this.state.index + 1;\n            if (index >= relevantImages.length) {\n                index = 0;\n            }\n            this.setState({index});\n        }, 5000);\n    }\n\n\n    render() {\n        const { gameId, playerId } = this.props;\n\n        if (this.items.length === 0){\n            console.log('no images found for this game/player');\n            return <div/>\n        }\n\n        return (\n            <div className=\"image-slider\">\n                {playerId && <div>player images</div>}\n                {gameId && <div>game images</div>}\n\n                <img src={this.items[this.state.index].original}/>\n                <div>\n                    { this.items[this.state.index].date  }\n                </div>\n\n                <div>\n                    in the picture: { this.items[this.state.index].taggedPlayers }\n                </div>\n            </div>\n        )\n    }\n}\nexport default ImageSlider;\n","const isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\nasync function sleep(time) {\n  return new Promise((acc)=>{\n    setTimeout(()=>{acc()},time);\n  })\n}\nasync function goToPlayerPage(playerId) {\n  const id = `plyr_${playerId}`;\n  await sleep(50);\n  const playersItem = document.getElementById(\"uncontrolled-tab-example-tab-players\");\n  if (!playersItem) {\n    console.log('could not found item by id: uncontrolled-tab-example-tab-players');\n    return\n  }\n  playersItem.scrollIntoView();\n  await sleep(100);\n  playersItem.click();\n  await sleep(300);\n  const playerItem = document.getElementById(id);\n  if (!playerItem) {\n    console.log('could not found item by id: '+id);\n    return\n  }\n  playerItem.scrollIntoView();\n  await sleep(200);\n  playerItem.click();\n  await sleep(100);\n  window.scrollTo(0, isMobile ? 200 : 250);\n}\n\nexport default goToPlayerPage;\n","import React, { Component } from 'react';\nimport {LineChart, Line, XAxis, YAxis, CartesianGrid, ReferenceLine } from 'recharts';\n\nimport CONSTS from '../CONSTS';\n\nimport Size from '../sizes';\nimport InputRange from \"react-input-range\";\nimport ImageSlider from '../components/ImageSlider';\nimport goToPlayerPage from '../actions/goToPlayerPage';\nconst colors = [\"#317F42\",  \"#14A9B6\",  \"#D9892B\",  \"#A23DA3\",  \"#A3A23D\",  \"#9189DF\",  \"#74B0A1\",  \"#A53542\",  \"#FD0724\",  \"#8F6947\",  \"#FF77E7\", \"#447F66\",  \"#55A9A7\",  \"#D6696B\",  \"#423D7A\"];\n\nconst { ANON_URL, GREEN, RED, TRANSPARENT} = CONSTS;\nconst  {Width} = Size;\nconst SmartPhone = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\nclass GameData extends Component{\n\n    createPlayersDataAsFakeGame = (group, max, minIndex, maxIndex, showSummaryByMoney) => {\n        const { games } = group;\n        this.balances = {};\n        this.totalGamesCounts = {};\n        this.gamesCount = {};\n        const fourMonthMinIndex = showSummaryByMoney ? maxIndex - 12  < 0 ? 0 :maxIndex - 12 : minIndex;\n        const sortedGames = games.sort((a,b)=> a.date < b.date ? -1 :1);\n        sortedGames.slice(fourMonthMinIndex, maxIndex+1).forEach(game=>{\n            game.playersData.forEach(({playerId})=>{\n                if (!this.gamesCount.hasOwnProperty(playerId)){\n                    this.gamesCount[playerId] = 0;\n                }\n                this.gamesCount[playerId] =  this.gamesCount[playerId] + (showSummaryByMoney ? 1 : (game.mvpPlayerId===playerId ? 1 : 0));\n            });\n        });\n        sortedGames.slice(minIndex, maxIndex+1).forEach(game=>{\n\n            game.playersData.forEach(({playerId, buyIn,cashOut})=>{\n\n                if (!this.balances.hasOwnProperty(playerId)){\n                    this.balances[playerId] = 0;\n                }\n                if (!this.totalGamesCounts.hasOwnProperty(playerId)){\n                    this.totalGamesCounts[playerId] = 0;\n                }\n                if (showSummaryByMoney){\n                    this.balances[playerId] =  this.balances[playerId] + cashOut - buyIn;\n                } else{\n                    this.balances[playerId] =  this.balances[playerId] + (playerId === game.mvpPlayerId ? 1 : 0);//TODO\n                }\n\n                this.totalGamesCounts[playerId] =  this.totalGamesCounts[playerId] + 1;\n            });\n        });\n        this.playersCountText = Object.keys(this.balances).length;\n\n        const playersData = Object.keys(this.gamesCount).map(id=>{\n            return {\n                id,\n                playerId: id,\n                buyIn:0,\n                cashOut: this.balances[id],\n                lastFourMonthGamesCount: this.gamesCount[id],\n                gamesCount: this.totalGamesCounts[id],\n                percentage: showSummaryByMoney ? undefined : Math.floor(this.balances[id] * 100 / this.totalGamesCounts[id])\n            }\n        }).sort((a,b)=> {\n            return a.lastFourMonthGamesCount > b.lastFourMonthGamesCount ? -1 : (a.lastFourMonthGamesCount < b.lastFourMonthGamesCount ? 1 : (a.gamesCount < b.gamesCount ? -1 : 1))\n        }).slice(0,max+1).filter(item => showSummaryByMoney ? true : item.cashOut > 0 && item.gamesCount > 0);\n\n        return {\n            playersData\n        }\n    };\n\n    updateAfterSwitch(){\n        const showSummaryByMoney = !this.state.showSummaryByMoney;\n        const Game = this.createPlayersDataAsFakeGame(this.prop.group, this.prop.playersCount, this.state.sliderValues.min, this.state.sliderValues.max, showSummaryByMoney);\n        this.setState({ Game, showSummaryByMoney });\n    }\n    constructor(props){\n        super(props);\n        this.prop = props\n        const group = props.group;\n        this.yearsObject = {};\n        group.games.sort((a,b)=>a.date < b.date ? -1 : 1).forEach((game,index)=>{\n            const year = game.date.getYear() + 1900;\n            if (!this.yearsObject[year]){\n                this.yearsObject[year] = {\n                    from: index,\n                    to: index\n                }\n            } else{\n                this.yearsObject[year].to = index;\n            }\n        });\n\n        const sliderValues ={ min: 0, max: group.games.length - 1 };\n        const Game = props.IsGroupSummary ? this.createPlayersDataAsFakeGame(props.group, props.playersCount, sliderValues.min, sliderValues.max, true): props.game;\n        this.state = { sliderValues, Game, isPlaying: false, showSummaryByMoney: true, IsGroupSummary: props.IsGroupSummary }\n    }\n\n    getPlayerImage(playerInfo, playerWidth, margin){\n        const isLoggedInPlayer = playerInfo.isMe;\n        const key = `${playerInfo.playerId}_item_image`;\n\n        const imgWidth = playerWidth - margin;\n        const imgHeight = imgWidth * 1.1;\n        const ImgStyleObject = {\n            width:imgWidth,\n            height: imgHeight,\n            marginRight:margin,\n        };\n        if (isLoggedInPlayer){\n            ImgStyleObject.border=\"1px solid yellow\"\n        }\n        const onImageError = (ev)=>{\n            if (!ev.target.secondTry){\n                ev.target.secondTry = true;\n                ev.target.src=playerInfo.imageUrl;\n            }else{\n                ev.target.src=ANON_URL;\n            }\n        };\n        const playerName = playerInfo.name;\n        const imageUrl = playerInfo.imageUrl || ANON_URL;\n        return (<img key={key}  alt={playerName} style={ImgStyleObject} className=\"GamePlayerImage\" src={imageUrl} onError={onImageError} />);\n    }\n\n    getNamesSection(playersData, playerWidth, margin, first){\n\n        return playersData.map(playerData=>{\n\n            const key = `${playerData.id}_item_name`;\n            let displayName= playerData.name.trim();\n\n            let className = \"GamePlayerDisplayName\";\n            if (displayName.indexOf(' ')>0){\n                const index = first ? 0 : 1;\n                displayName=displayName.split(' ')[index];\n            }else{\n                if (!first){\n                    displayName='----';\n                    className +=' transparentTextColor';\n                }\n            }\n\n            const styleObject = {\n                width:playerWidth-margin,\n                marginRight:margin,\n            };\n\n            return  (\n                <div key={key} style={styleObject} className={className} onClick={()=>{goToPlayerPage(playerData.playerId)}}>\n                    {displayName}\n                </div>\n            );\n        });\n    }\n\n    render(){\n        const {group, IsGroupSummary, playersCount } = this.props;\n        const { Game, sliderValues, showSummaryByMoney} = this.state;\n\n        if (group.games.length  -1 < this.state.sliderValues.max){\n            sliderValues.min=0;\n            sliderValues.max=group.games.length -1;\n            const newSliderValues = {...sliderValues};\n            setTimeout(()=>{\n                this.setState({sliderValues: newSliderValues});\n            },1)\n        }\n\n\n        const {players} = group;\n        const {playersData} = Game;\n        if (playersData.length === 0) {\n            return <div> no players yet</div>\n        }\n        const playersInfo = playersData.map(playerData=>{\n            const data = { ...playerData }\n            const playerObject = players.find(player=>player.id ===data.playerId);\n            data.dif = data.cashOut-data.buyIn;\n            data.val = data.dif> 0 ?  `+${data.dif}` : `${data.dif}`;\n            data.imageUrl = playerObject.imageUrl;\n            data.isMe = playerObject.isMe;\n            data.name = playerObject.name;\n            data.gamesCount =  playerObject.gamesCount;\n            return data;\n        }).sort((a,b)=> a.dif > b.dif ? -1 : 1).filter(d=>d.gamesCount);\n        if (!playersInfo || playersInfo.length === 0){\n            return <div>No data yet</div>\n        }\n        const isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n        const margin = isMobile ? 2: 5;\n\n        const hasNegatives = playersInfo.filter(p=>p.dif<=0).length > 0;\n\n        const width = IsGroupSummary ? (isMobile ? 0.8 * Width : 0.93 * Width) : (  isMobile ? 0.80 * Width :  0.63 * Width);\n        const playerWidth = playersInfo.length < 3 ? width / 4 :  width / playersInfo.length;\n        const PlayerImages = playersInfo.map((playerInfo)=> this.getPlayerImage(playerInfo, playerWidth, margin));\n\n        const PlayerNames1 =  this.getNamesSection(playersInfo,playerWidth,margin,true);\n        const PlayerNames2 =  this.getNamesSection(playersInfo,playerWidth,margin,false);\n\n        const CurrencySign = showSummaryByMoney ? '₪' : ' out of';\n\n        const PlayerBalance = playersInfo.map(playerInfo=>{\n            const key = `${playerInfo.playerId}_item_balance`;\n            const val = IsGroupSummary ? this.balances[playerInfo.playerId] :playerInfo.val;\n            const styleObject = {\n                width:playerWidth-margin,\n                marginRight:margin,\n            };\n            return  (\n                <div key={key} style={styleObject} className=\"GamePlayerBalance\"  >\n                    <span className=\"GamePlayerBalanceCurrencySign\">{showSummaryByMoney ? '':'mvp in '}</span> {val}<span className=\"GamePlayerBalanceCurrencySign\">{CurrencySign}</span>\n                </div>\n            );\n        });\n\n        const PlayerGameCount = IsGroupSummary ? playersInfo.map(playerInfo=>{\n            const key = `${playerInfo.playerId}_item_gamesCount`;\n            const styleObject = {\n                width:playerWidth-margin,\n                marginRight:margin,\n            };\n\n\n            return  (\n                <div key={key} style={styleObject} className=\"GamePlayerGamesCount\"  >\n                    {this.totalGamesCounts[playerInfo.playerId]} games\n                </div>\n            );\n        }):[];\n        const PlayerPercentages = IsGroupSummary ? playersInfo.map(playerInfo=>{\n            const key = `${playerInfo.playerId}_item_percentage`;\n            const styleObject = {\n                width:playerWidth-margin,\n                marginRight:margin,\n            };\n            return  (\n                <div key={key} style={styleObject} className=\"GamePlayerGamesCount\"  >\n                      <div className=\"GamePlayersGamesCount\"> {`(${playerInfo.percentage}%)`} </div>\n                </div>\n            );\n        }):[];\n\n        const PlayerRankingBalance= hasNegatives ? <div/> :( playersInfo.map(playerInfo=>{\n            const key = `${playerInfo.playerId}_item_Rankingbalance`;\n\n            const styleObject = {\n                width:playerWidth-margin,\n                marginRight:margin,\n            }\n            return  (\n                <div key={key} style={styleObject} className=\"GamePlayerBalance\"  >\n                    {playerInfo.val}\n                </div>\n            );\n        }));\n\n        const maxPositive =  playersInfo[0].dif;\n\n        const positiveRatio = maxPositive === 0 ? 10 : 100/maxPositive;\n        let GamePlayerPositives = playersInfo.map((playerInfo)=>{\n\n            const key = `${playerInfo.playerId}_item_positiveDiv`;\n            let imageUrl = playerInfo.dif > 0 ? GREEN : TRANSPARENT;\n            const height =  playerInfo.dif>0 ? positiveRatio* playerInfo.dif : 150;\n            const barsStyleObject = {\n                marginTop:(150 - height),\n                width:playerWidth-margin,\n                marginRight:margin,\n                height\n            }\n\n            return  (\n                <img alt=\"\" key={key} className=\"barItemPositive\" style={barsStyleObject} src={imageUrl}  />\n            );\n        });\n        const maxNegative = playersInfo[playersInfo.length-1].dif;\n        const negativeRatio = maxNegative ===0 ? 10 :   100 / maxNegative;\n\n        let GamePlayerNegatives = playersInfo.map(playerInfo=>{\n            let imageUrl = playerInfo.dif < 0 ? RED: TRANSPARENT;\n            const key = `${playerInfo.playerId}_item_negativeDiv`;\n\n            const height = playerInfo.dif>0 ? 150 : negativeRatio* playerInfo.dif;\n\n            const barsStyleObject = {\n                marginTop:-1*(150 - height),\n                width:playerWidth-margin,\n                marginRight:margin,\n                height\n            };\n            return  (\n                <img alt=\"\" key={key} className=\"barItemNegative\" style={barsStyleObject} src={imageUrl}  />\n            );\n        });\n\n        GamePlayerPositives = (<div className=\"GamePlayerBars\" >\n            {GamePlayerPositives}\n        </div>);\n\n        GamePlayerNegatives = hasNegatives ? (<div className=\"GamePlayerBars\" >\n            {GamePlayerNegatives}\n        </div>) : <div/>\n\n\n        const playersIdsToGamesCountObjMapper = {};\n        const playersIdsToBalanceObjMapper = {};\n        const filterGames = group.games\n            .sort((a,b)=>a.date < b.date ? -1 : 1)\n            .filter((game,index) => sliderValues.min <= index && index <= sliderValues.max);\n\n        filterGames.forEach(game=>{\n            game.playersData.forEach(({playerId, buyIn,cashOut})=>{\n                if (!playersIdsToGamesCountObjMapper.hasOwnProperty(playerId)){\n                    playersIdsToGamesCountObjMapper[playerId] = 0;\n                }\n                if (!playersIdsToBalanceObjMapper.hasOwnProperty(playerId)){\n                    playersIdsToBalanceObjMapper[playerId] = 0;\n                }\n                playersIdsToGamesCountObjMapper[playerId] += 1;\n                playersIdsToBalanceObjMapper[playerId] =  playersIdsToBalanceObjMapper[playerId] + cashOut - buyIn;\n            });\n        });\n        const playersToShow = Object.keys(playersIdsToGamesCountObjMapper).map((id,index)=>{\n                const name = group.players.find(p=>p.id===id).name;\n                return {\n                    playerId:id,\n                    gamesCount:playersIdsToGamesCountObjMapper[id],\n                    name,\n                    id,\n                    balance: playersIdsToBalanceObjMapper[id],\n                }\n            }).sort((a,b)=>a.gamesCount< b.gamesCount ? 1 : -1).slice(0,playersCount).map((item,index)=>{\n                return {\n                    ...item,\n                    color:  colors[index]\n                }\n        })\n\n        const playersIdsToNameObjMapper = {};\n\n        const data = [];\n        const zeros = { name:\"\"};\n        playersToShow.forEach(playersInfo => {\n            playersIdsToNameObjMapper[playersInfo.playerId] = playersInfo.name;\n            zeros[playersInfo.name]=0;\n        });\n        data.push(zeros);\n\n        filterGames\n            .forEach((game)=>{\n                const prevData = data[data.length-1];\n                const gamePlayers = game.playersData.filter(player => playersIdsToNameObjMapper[player.playerId]).map(player => ({name: playersIdsToNameObjMapper[player.playerId], dif: player.cashOut - player.buyIn }));\n               const gameData = {\n                   name: game.date.AsGameName()\n               };\n                gamePlayers.forEach(({name,dif})=>{\n                    const prevValue = prevData[name];\n                    gameData[name] = dif + prevValue;\n                });\n\n               playersToShow.forEach(playersInfo => {\n                   if (!gameData.hasOwnProperty(playersInfo.name)){\n                       const prevValue = prevData[playersInfo.name];\n                       gameData[playersInfo.name] = prevValue;\n                   }\n               });\n\n\n\n                data.push(gameData)\n            });\n        const lines = playersToShow.map(playerInfo=> <Line key={`line${playerInfo.name}`} className=\"graphLine\" type=\"monotone\" dataKey={playerInfo.name} stroke={playerInfo.color} />);\n        const menu = playersToShow.sort((a,b)=>a.balance > b.balance ? -1 : 1).map(({id, name,color, balance})=> {\n            const style = {\n                color,\n            }\n\n            return (<div key={`menu${color}${name}`} className=\"menuItem\" style={style} > {name}: {balance} ({playersIdsToGamesCountObjMapper[id]} games) </div>);\n        });\n        const yearsButtons = Object.keys(this.yearsObject).sort().map(year=>{\n            return <button key={`year-${year}`}\n                           className=\"year-button\"\n                           onClick={()=> {\n                               const newState= { isPlaying:false, sliderValues: { min: this.yearsObject[year].from, max: this.yearsObject[year].to }};\n                               if (this.props.IsGroupSummary){\n                                   newState.Game = this.createPlayersDataAsFakeGame(this.props.group, this.props.playersCount, this.yearsObject[year].from, this.yearsObject[year].to, this.state.showSummaryByMoney );\n                               }\n                               this.setState(newState)\n                           }}>{year}</button>\n        });\n        yearsButtons.push( <button key={`all-years`}\n                                   className=\"year-button\"\n                                   onClick={()=> {\n                                       const newState= { isPlaying:false, sliderValues: { min: 0, max: group.games.length -1 }};\n                                       newState.Game = this.createPlayersDataAsFakeGame(this.prop.group, this.prop.playersCount, newState.sliderValues.min, newState.sliderValues.max, this.state.showSummaryByMoney);\n\n                                       this.setState(newState)\n                                   }}>All</button>)\n\n\n        const playStopButton = <button key={`play-all`}\n                                  className=\"year-button\"\n                                  onClick={()=> {\n                                      const newState= {};\n                                      if (!this.state.isPlaying) {\n                                          newState.sliderValues = { min: 0, max: 4 };\n                                          newState.isPlaying = true;\n                                          const update = ()=>{\n                                              const innerNewState = { sliderValues: { min: 0, max: this.state.sliderValues.max + 1 }};\n                                              if (innerNewState.sliderValues.max > group.games.length -1){\n                                                  innerNewState.sliderValues.max = 4;\n                                              }\n                                              innerNewState.Game = this.createPlayersDataAsFakeGame(group, this.props.playersCount, 0,  this.state.sliderValues.max, this.state.showSummaryByMoney );\n\n                                              if (this.state.isPlaying) {\n                                                  this.setState(innerNewState);\n                                                  setTimeout(update,70)\n                                              }\n                                          }\n\n                                          setTimeout(update,1500)\n\n\n                                      }else{\n                                          newState.isPlaying = false;\n                                      }\n                                      this.setState(newState)\n                                  }}>{ this.state.isPlaying ? 'Stop' : 'Play'}</button>\n\n        const graph = (\n            <div >\n\n                {playStopButton}\n                <LineChart className=\"gameGraphLineChart\" width={SmartPhone ? Width : Width*(88/100)} height={SmartPhone ? 260 : 500} data={data}  >\n                    <XAxis dataKey=\"name\"/>\n                    <YAxis/>\n                    <CartesianGrid strokeDasharray=\"0 40\"/>\n                    <ReferenceLine y={0} label=\"Zero\" stroke=\"red\"/>\n\n                    {lines}\n                </LineChart>\n                <div>\n                    {yearsButtons}\n                </div>\n                <div className=\"menu\">\n                     {menu}\n                </div>\n            </div>\n        );\n        const gamesDates = IsGroupSummary ? (\n            <div className=\"black\" >\n            {sliderValues.max - sliderValues.min +1 } games ({group.games[sliderValues.min].date.AsGameName()} - {group.games[sliderValues.max].date.AsGameName()})\n        </div>):<div/>;\n\n        let playersCountText = IsGroupSummary ?  this.playersCountText : playersData.length;\n        return (\n            <div className={`allPlayersSummary ${IsGroupSummary ? 'groupSummary': ''}`}\n\n            >\n\n                {\n                    (this.props.IsGroupSummary && (sliderValues.min > 0 || sliderValues.max < this.props.group.games.length-1)) &&\n                    <div className=\"black\">\n                        <b>(filtered data)</b>\n                    </div>\n                }\n                {gamesDates}\n                <div className=\"black\">\n                    { playersCountText } players\n                </div>\n\n                <div>\n                  <span className=\"white\">xx</span>\n                </div>\n\n                <div className=\"GamePlayerNames\">\n                    {PlayerNames1}\n                </div>\n\n                <div className=\"GamePlayerNames\">\n                    {PlayerNames2}\n                </div>\n\n                <div className=\"GamePlayerImages\">\n                    {PlayerImages}\n                </div>\n                <div className=\"GamePlayerBalance\">\n                    {PlayerBalance}\n                </div>\n                {IsGroupSummary ?<div className=\"GamePlayersGamesCount\"> {PlayerGameCount} </div> : <div/> }\n                {IsGroupSummary && !showSummaryByMoney ? <div className=\"GamePlayersGamesCount\"> {PlayerPercentages} </div> : <div/> }\n                <br/>\n                <br/>\n                {GamePlayerPositives}\n                {PlayerRankingBalance}\n                {GamePlayerNegatives}\n\n                <div>\n                    {this.state.IsGroupSummary ? <button onClick={()=>this.updateAfterSwitch()}> { this.state.showSummaryByMoney ? 'switch to games won mode':'switch back'}</button> : <span></span>}\n                </div>\n                <hr/>\n                { IsGroupSummary && group.games.length>0 && (\n                    <div className=\"black\">\n                        <div\n\n                        ><b>Date range specific data:</b><br/></div>\n                        <div>From { group.games[sliderValues.min].date.AsGameName()} to { group.games[sliderValues.max].date.AsGameName()}</div>\n                        <div>\n                            <InputRange className=\"InputRange\"\n                                        step={1}\n                                        formatLabel={() => ``}\n                                        maxValue={ group.games.length - 1}\n                                        minValue={0}\n                                        value={sliderValues}\n                                        onChange={sliderValues => {\n                                            if (sliderValues.min < sliderValues.max){\n                                                const newState = { sliderValues };\n                                                if (IsGroupSummary){\n                                                    newState.Game = this.createPlayersDataAsFakeGame(group, this.props.playersCount, sliderValues.min, sliderValues.max, this.state.showSummaryByMoney);\n                                                }\n                                                this.setState(newState);\n                                            }\n                                        }} />\n                        </div>\n                        <div>\n                            {graph}\n                        </div>\n\n\n                    </div>)\n                }\n\n                {!IsGroupSummary &&\n                <ImageSlider group={group} gameId={Game.id}/>\n                }\n            </div>\n        );\n\n\n    }\n}\n\nexport default GameData;\n\n","import React from 'react'\nimport _ from \"lodash\";\n\nfunction getMappings (positivePlayers, negativePlayers){\n    //console.log('getMappings ', positivePlayers.length,negativePlayers.length);\n    if (positivePlayers.length === 0 || negativePlayers.length===0){\n        return []\n    }\n    if (positivePlayers.length === 1 && negativePlayers.length===1){\n        if (positivePlayers[0].balance === negativePlayers[0].balance){\n            return [{\n                from: negativePlayers[0],\n                to: positivePlayers[0],\n                amount: negativePlayers[0].balance\n            }];\n        } else{\n            console.log('positivePlayers',positivePlayers);\n            console.log('negativePlayers',negativePlayers);\n            throw new Error('WTF, this does not make sense',)\n        }\n    }\n\n    const intersection = _.intersectionBy(negativePlayers, positivePlayers, 'balance');\n    const mapping = [];\n    if (intersection && intersection.length > 0){\n        for (const negativePlayer of intersection){\n            const negative = negativePlayers.find(p => p.balance === negativePlayer.balance);\n            const positive = positivePlayers.find(p => p.balance === negativePlayer.balance);\n            if (negative && positive){\n                mapping.push({\n                    from: negative,\n                    to: positive,\n                    amount: positive.balance\n                });\n                negativePlayers = negativePlayers.filter(p => p.id !== negativePlayer.id);\n                positivePlayers = positivePlayers.filter(p => p.id !== positive.id);\n            }\n        }\n    }\n\n    negativePlayers = negativePlayers.sort((a,b)=> a.balance < b.balance ? -1 : 1);\n    positivePlayers = positivePlayers.sort((a,b)=> a.balance < b.balance ? -1 : 1);\n\n    const firstNegative = negativePlayers[0];\n    const firstPositive = positivePlayers[0];\n    if (firstNegative.balance > firstPositive.balance){\n        // firstNegative = 40\n        // firstPositive = 30\n        mapping.push({\n            from: firstNegative,\n            to: firstPositive,\n            amount: firstPositive.balance\n        });\n        positivePlayers = positivePlayers.filter(p => p.id !== firstPositive.id);\n        negativePlayers = negativePlayers.map(p => {\n            if (p.id !== firstNegative.id){\n                return p;\n            } else{\n                return { ...p, balance: firstNegative.balance - firstPositive.balance}\n            }\n        });\n\n    } else if (firstNegative.balance < firstPositive.balance){\n        // firstNegative = 30\n        // firstPositive = 40\n        mapping.push({\n            from: firstNegative,\n            to: firstPositive,\n            amount: firstNegative.balance\n        });\n        negativePlayers = negativePlayers.filter(p => p.id !== firstNegative.id);\n\n        positivePlayers = positivePlayers.map(p => {\n            if (p.id !== firstPositive.id){\n                return p;\n            } else{\n                return { ...p, balance: firstPositive.balance - firstNegative.balance}\n            }\n        });\n    }\n\n    return [...mapping, ...getMappings(positivePlayers, negativePlayers)];\n\n}\nfunction getWhoOweWhoMapping(game, group){\n    const gamePlayersData = game.playersData.map(player=>{\n        const data = group.players.find(p=> p.id === player.playerId);\n        return {\n            id: player.playerId,\n            name: data.name,\n            imageUrl: data.imageUrl,\n            cashOut: player.cashOut,\n            buyIn: player.buyIn,\n            balance:  player.cashOut -  player.buyIn\n        }\n    });\n\n    const positivePlayers = gamePlayersData.filter(player => player.balance > 0).sort((a,b)=> a.balance < b.balance ? -1 : 1);\n    const negativePlayers = gamePlayersData.filter(player => player.balance < 0).map(player => ({...player, balance: -1 * player.balance})).sort((a,b)=> a.balance < b.balance ? -1 : 1);\n    console.log('positivePlayers',positivePlayers);\n    console.log('negativePlayers',negativePlayers);\n    const mapping = getMappings(positivePlayers, negativePlayers).sort((a,b)=> {\n        if (a.from.id < b.from.id) {\n            return -1;\n        } else if (a.from.id > b.from.id){\n            return 1\n        } else{\n            return (a.amount < b.amount ? -1 : 1);\n        }\n    });\n   // console.log('result mapping', mapping.map(item=>`from ${item.from.name} to ${item.to.name}: ${item.amount}`))\n    return mapping;\n}\n\nconst WhoOwesWho = (props) => {\n    console.log('WW props',props)\n    const {game, group} = props;\n    const mappings = getWhoOweWhoMapping(game, group);\n    return (\n        <div>\n            {mappings.map(item=> {\n                return <div className='from-to-row' key={`_from_${item.from.id}_to${item.to.id}`}> <b> {item.from.name} </b> should give <b> {item.amount}₪ </b> to <b> {item.to.name} </b> </div>\n            })}\n        </div>\n\n    )\n}\n\nexport default WhoOwesWho;\n","\nimport React, { Component } from 'react';\nimport GameData from './GameData';\nimport WhoOwesWho from '../containers/WhoOwesWho';\nimport CONSTS from '../CONSTS';\nimport GrayBubbleButton from '../containers/GrayBubbleButton';\nimport RedBubbleButton from '../containers/RedBubbleButton';\nconst { ANON_URL } = CONSTS;\nclass GameSummary extends Component {\n\n    showWhoOwesWho = ()=>{\n        this.setState({ shouldShowWhoOwesWho: !this.state.shouldShowWhoOwesWho })\n    }\n    constructor(props){\n        super(props);\n\n        const { group, game } = props;\n        const { isAdmin} = group;\n\n\n        this.state = {shouldShowWhoOwesWho: false}\n\n        const gamePlayersData =  game.playersData.map(player=>{\n            const data =  group.players.find(p=> p.id === player.playerId);\n            return {\n                id: player.playerId,\n                name: data.name,\n                imageUrl: data.imageUrl,\n                cashOut: player.cashOut,\n                buyIn: player.buyIn,\n                balance:  player.cashOut -  player.buyIn\n            }\n        }).sort((a,b)=> a.name < b.name ? -1 : 1).map(((player,index) =>{\n\n            const onImageError = (ev)=>{\n                if (!ev.target.secondTry){\n                    ev.target.secondTry = true;\n                    ev.target.src= player.imageUrl;\n                }else{\n                    ev.target.src=ANON_URL;\n                }\n            };\n            return (<div className=\"gamePlayerData col-xs-11 col-lg-2 row\" key={`gamePlayerData${player.id}`}>\n                <div  className=\"col-xs-3\">\n                    <img alt={player.name} className=\"gamePlayerDataImage\" src={player.imageUrl || ANON_URL}  onError={onImageError} />\n                </div>\n                <div  className=\"col-xs-8\">\n                    <div>\n                        { player.name}\n                    </div>\n                    <div>\n                        buy-in: {player.buyIn}\n                    </div>\n                    <div>\n                        cash-out: {player.cashOut}\n                    </div>\n                    <div>\n                        bottom-line: {player.balance}\n                    </div>\n                </div>\n\n            </div>);\n        }))\n        this.game = game;\n        this.gamePlayersData = gamePlayersData;\n        this.isAdmin = isAdmin;\n    }\n    getGamePot = (game)=>{\n        return game.playersData.reduce((all, one)=>{\n            return all + one.buyIn;\n        }, 0);\n    }\n\n    gameDateToString = (game)=>{\n        const addLeaddingZero = (num)=>{\n            const str = `${num}`;\n            if (str.length === 2){\n                return str;\n            } else{\n                return `0${str}`;\n            }\n        };\n\n        const isoDate = typeof  game.date === 'string' ? game.date.substr(0,10) :  game.date.toISOString();\n        const year = parseInt(isoDate.substr(0, 4), 10);\n        const month = addLeaddingZero(parseInt(isoDate.substr(5, 2), 10));\n        const day = addLeaddingZero(parseInt(isoDate.substr(8, 2), 10));\n\n        return `${day}/${month}/${year}`;\n    }\n    render(){\n        const group = this.props.group;\n        const game = this.game;\n        const gamePlayersData = this.gamePlayersData;\n        const isAdmin = this.isAdmin;\n\n        return (\n            <div id=\"gameSummary\">\n                <div id=\"gameSummaryHeader\">\n                    <GrayBubbleButton onClick={this.props.back} className=\"button\">Back</GrayBubbleButton>\n                    <div>\n                        <b><u>Game summary</u></b>\n                    </div>\n                    <div>\n                        Date: {this.gameDateToString(game)}\n                    </div>\n                    <div>\n                        {game.description}\n                    </div>\n                    <div>\n                        Pot size:  {this.getGamePot(game)}\n                    </div>\n                </div>\n\n                <GameData group={group} game={game}  />\n\n                {isAdmin && <GrayBubbleButton onClick={this.props.edit} className=\"button left-margin\">Edit</GrayBubbleButton>}\n                {isAdmin && <RedBubbleButton onClick={this.props.delete} className=\"button left-margin\">Delete</RedBubbleButton>}\n                <GrayBubbleButton onClick={this.showWhoOwesWho} className=\"button left-margin\"> {this.state.shouldShowWhoOwesWho ? 'Hide' :'Show'} Who Owes Who</GrayBubbleButton>\n                { this.state.shouldShowWhoOwesWho && <WhoOwesWho group={group} game={game} /> }\n                <div className=\"more-data-text\"><u>more data:</u></div>\n                <div id=\"gamePlayersData\" className=\"row\">\n\n                    {gamePlayersData}\n                </div>\n\n\n            </div>\n        );\n    }\n}\n\nexport default GameSummary;\n","/* eslint-disable no-console */\n/* eslint-disable prefer-promise-reject-errors */\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function deleteImage(imageId, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'DELETE',\n      url: `${URL_PREFIX}/images/${imageId}`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to delete image');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to delete image');\n        return reject(bodyObj.title);\n      }\n      return resolve(true);\n    });\n  });\n}\n\nexport default deleteImage;\n","/* eslint-disable no-restricted-globals */\n\nimport React, { Component } from 'react';\nimport deleteImage from '../actions/deleteImage';\nimport ShowErrorAlert from '../containers/ShowErrorAlert';\nimport ShowSuccessAlert from '../containers/ShowSuccessAlert';\nimport GrayBubbleButton from '../containers/GrayBubbleButton';\nimport RedBubbleButton from '../containers/RedBubbleButton';\nclass ImageData extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = { showErrorOnDeleteImage: null,showSuccessDeleteImage: null };\n    }\n\n    removeImage = ()=>{\n        if (confirm(\"Are you sure?\")){\n            const { id: imageId, close, provider, token, removeImage} = this.props;\n            deleteImage(imageId, provider, token).then(()=>{\n                this.setState({ showSuccessDeleteImage: true});\n                setTimeout(()=>{\n                    this.setState({ showSuccessDeleteImage: null});\n                    removeImage(imageId);\n                    close();\n                },100)\n            }).catch((e)=>{\n                this.setState({ showErrorOnDeleteImage: true});\n                setTimeout(()=>{\n                    this.setState({ showErrorOnDeleteImage: null});\n                    close();\n                },100)\n            })\n        }\n    }\n    render() {\n        const { showErrorOnDeleteImage,showSuccessDeleteImage } = this.state;\n       const { image, group, uploadedByName, uploadedById, playerIds, gameIds, user} = this.props;\n       const curentUserId = user.id;\n       let isAdmin = false;\n       if (group && user && user.groups && user.groups[group.id]){\n           isAdmin = user.groups[group.id].isAdmin;\n       }\n       const canDelete = isAdmin || curentUserId === uploadedById;\n        console.log('user',user)\n       const game = group.games.find(g=>g.id === gameIds[0]);\n       const gameDate = game ? game.date.AsGameName() : 'unknown';\n\n       let players = group.players.filter(p => playerIds.includes(p.id));\n       players = players.map(p=>{\n           return <li key={`taged_players_${p.id}`}> {p.name}</li>\n       })\n       return (\n            <div id=\"image-data\">\n                <div className=\"image-data-item\">\n                    <div>\n                        <img alt=\"image\" id=\"image-data-preview\" src={image}/>\n                    </div>\n                    <div>\n                        Uploaded by: {uploadedByName}\n                    </div>\n                    <hr/>\n                    <div>\n                        <b><u>Tags:</u></b>\n                        <div>\n                            Group: {group.name}\n                        </div>\n                        <div>\n                            Game: {gameDate}\n                        </div>\n                        <div>\n                            Players:\n                        </div>\n                        <div>\n                            <ul> {players} </ul>\n\n                        </div>\n                        <div>\n                            <GrayBubbleButton className=\"close-button\" onClick={this.props.close} >back</GrayBubbleButton>\n                        </div>\n                        <div>\n                            <RedBubbleButton disabled={!canDelete} className=\"delete-image-button\" onClick={this.removeImage} >DELETE IMAGE</RedBubbleButton>\n                        </div>\n                    </div>\n\n\n                </div>\n                { showErrorOnDeleteImage && <ShowErrorAlert message={\"failed to remove image\"}/>}\n\n                { showSuccessDeleteImage && <ShowSuccessAlert message={\"image was removed\"}/>}\n            </div>\n        );\n\n    }\n}\n\nexport default ImageData;\n\n","import request from 'request';\nimport resizebase64 from 'resize-base64';\nimport URL_PREFIX from '../url';\n\nasync function postImage(base64image, tags, playerImage, provider, token) {\n  try {\n    console.log('before', base64image);\n    base64image = resizebase64(base64image, 600, 600);\n    console.log('after', base64image);\n  } catch (e) {\n    console.log('error!!', e);\n  }\n\n  const { playerIds, gameIds, groupIds } = tags;\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/images`,\n      body: JSON.stringify({\n        playerIds: playerIds || [],\n        gameIds: gameIds || [],\n        groupIds: groupIds || [],\n        image: base64image,\n        playerImage,\n      }),\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to post image');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to post image');\n        return reject(bodyObj.title);\n      }\n      return resolve(JSON.parse(body));\n    });\n  });\n}\n\nexport default postImage;\n","\nimport React, { Component } from 'react';\nimport ImageData from './ImageData';\nimport ImageUploader from \"./ImageUploader\";\nimport postImage from \"../actions/postImage\";\n\nclass ImagesTab extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { selectedImage: null, showImageUploader: false };\n    }\n\n    showImageUploaderForm = ()=>{\n       this.setState({ showImageUploader: true});\n    }\n\n    hideImageUploaderForm = ()=>{\n        this.setState({ showImageUploader: false});\n    }\n\n    enterImagePage = (image) =>{\n        this.setState({selectedImage:image});\n    }\n\n    closeImagePage = () =>{\n        this.setState({selectedImage:null});\n    }\n\n    uploadImage = async (image, tags) =>{\n        return postImage(image, tags, false, this.props.provider, this.props.token);\n    }\n\n    render() {\n        const { group } = this.props;\n        if (this.state.selectedImage){\n            return <ImageData group={group}\n                              close={this.closeImagePage}\n                              user={this.props.user}\n                              {...this.state.selectedImage}\n                              provider={this.props.provider}\n                              removeImage={this.props.removeImage}\n                              token={this.props.token}/>\n        }\n        if (this.state.showImageUploader){\n\n            return <ImageUploader group={group}  close={this.hideImageUploaderForm} uploadImage={this.uploadImage} updateImage={this.props.updateImage}/>\n        }\n\n\n        const {images} = group;\n        const IMAGES = images.map((image) => {\n            return (\n                <div key={`${image.id}`} className=\"image-item-div\" onClick={()=>{this.enterImagePage(image)}}>\n                    <img key={`${image.id}__`} className=\"image-item-div-innerimg\" alt={`uploaded by ${image.uploadedByName}`} src={image.image}/>\n                </div>\n            );\n        })\n\n        return <div className=\"row\">\n            <div className=\"col-xs-6\">\n                <div className=\"image-item-div\"\n                     onClick={this.showImageUploaderForm}>\n                    <img src=\"plus.png\" key=\"plus\" className=\"image-item-div-plus-sign\"/>\n\n                </div>\n            </div>\n            {IMAGES}\n        </div>;\n\n    }\n}\n\nexport default ImagesTab;\n\n","\nimport React, { Component } from 'react';\nimport CONSTS from '../CONSTS';\nimport GrayBubbleButton from '../containers/GrayBubbleButton';\nimport RedBubbleButton from '../containers/RedBubbleButton';\nconst { ANON_URL } = CONSTS;\nclass OnGoingGame extends Component {\n\n    createPlayerRow = (playerData) =>{\n        const { game, group: { players: groupPlayers }  } = this.props;\n        const playersCount = game.playersData.length;\n\n        const { buyIn, cashOut, playerId} = playerData;\n        const { name, imageUrl='' } = groupPlayers.find(p=>p.id === playerId);\n        const bottomLine = (parseInt(cashOut, 10) - parseInt(buyIn, 10));\n        const buyInValue = `${buyIn>0?'+':''}${buyIn}₪`;\n        const cashOutValue = `${cashOut>0?'+':''}${cashOut}₪`;\n        const bottomLineValue = `${bottomLine>0?'+':''}${bottomLine}₪`;\n\n        const onImageError = (ev)=>{\n            if (imageUrl && imageUrl.length>1 && !ev.target.secondTry){\n                ev.target.secondTry = true;\n                ev.target.src=imageUrl;\n            }else{\n                ev.target.src=ANON_URL;\n            }\n        };\n\n        let imgHeight = (60 / playersCount)-0.5;\n        imgHeight = imgHeight>16 ? 15 : imgHeight;\n        const imageStyle = {height: `${imgHeight}vh`};\n        return (\n            <div className=\"col-xs-12 activeGamePlayerRow\">\n                <div className=\"col-xs-2 col-md-1\">\n                     <img alt={name} className=\"activeGameImage\" style={imageStyle}  src={imageUrl || ANON_URL}  onError={onImageError} />\n                </div>\n                <div className=\"col-xs-4 col-md-5 centeredText\">\n                    { name }\n                </div>\n                <div className=\"col-xs-2\"> {buyInValue}</div>\n                <div className=\"col-xs-2\"> {cashOutValue}</div>\n                <div className={`col-xs-2 ${bottomLine>0?'balanceWithCurrencyPositive':'balanceWithCurrencyNegative'}`}> {bottomLineValue}</div>\n            </div>\n        );\n    }\n\n    getPlayersDataAsList = () =>{\n        const { game, group: { players:  groupPlayers}} = this.props;\n        const players = game.playersData.map(player=>{\n            const { name, imageUrl } = groupPlayers.find(p=>p.id === player.playerId);\n            return {...player, name, imageUrl }\n        }).sort((a,b) => a.index < b.index ? -1 : 1).map((player, index)=>{\n            const onImageError = (ev)=>{\n                if (player.imageUrl && player.imageUrl.length>1 && !ev.target.secondTry){\n                    ev.target.secondTry = true;\n                    ev.target.src=player.imageUrl;\n                }else{\n                    ev.target.src=ANON_URL;\n                }\n            };\n            const image =  <img alt={player.name} className=\"activeGameCircleImage\" src={player.imageUrl || ANON_URL}  onError={onImageError} />\n            const positive = player.cashOut - player.buyIn > 0;\n            const balance =  `${positive ? '+':''}${player.cashOut - player.buyIn}₪`;\n            //cashOuts\n            const inOuts = player.extra ? [\n                ...(player.extra.buyIns || []).map(bi=> ({ time:bi.time, text: `${bi.time.AsExactTime(2)} +${bi.amount}₪ buy in`})),\n                ...(player.extra.cashOuts || []).map(co=> ({ time:co.time, text: `${co.time.AsExactTime(2)} +${co.amount}₪ cash out`}))\n            ].sort((a,b) => a.time < b.time ? -1 : 1) : [];\n            return  (<div key={`player${index}`} className=\"mobile-player\">\n\n                        {image}\n                        <span className=\"margin-both-sides\">{player.name}:</span>\n\n                         {inOuts.map(item => (<div key={`${player.name}-${item.time}-${item.text}`} className=\"gray\">{item.text}  </div>))}\n                         bottom line:  {balance}\n\n            </div>);\n        });\n\n        let inouts = game.playersData.map(player=>{\n            const { name, imageUrl } = groupPlayers.find(p=>p.id === player.playerId);\n            return {...player, name, imageUrl };\n        }).map((player)=>{\n            const onImageError = (ev)=>{\n                if (player.imageUrl && player.imageUrl.length>1 && !ev.target.secondTry){\n                    ev.target.secondTry = true;\n                    ev.target.src=player.imageUrl;\n                }else{\n                    ev.target.src=ANON_URL;\n                }\n            };\n            const image =  <img alt={player.name} className=\"activeGameCircleImage\" src={player.imageUrl || ANON_URL}  onError={onImageError} />\n            //cashOuts\n            const inOuts = player.extra ? [\n                ...(player.extra.buyIns || []).map(bi=> ({ time:bi.time, image, timeText:bi.time.AsExactTime(2), text: `${player.name} added +${bi.amount}₪`})),\n                ...(player.extra.cashOuts || []).map(co=> ({ time:co.time, image, timeText:co.time.AsExactTime(2), text: `${player.name} took ${co.amount}₪`}))\n            ] : [];\n           return inOuts;\n        });\n        inouts = inouts.reduce((all,item)=>{\n            return [...all,...item]\n        }, []).sort((a,b) => a.time < b.time ? -1 : 1).map((item,index) => (<div className=\"inout-border\" key={`${index}-itemm`} >{item.timeText} {item.image} {item.text}</div>));\n\n        return (\n            <div className=\"mobile-players\">\n                {players}\n\n                <hr/>\n                {inouts}\n            </div>);\n    }\n\n    getAsPokerTable = () =>{\n        const { game, group: { players:  groupPlayers}} = this.props;\n        const players = game.playersData.map(player=>{\n            let all = player.buyIn;\n            const bluesCount =  Math.floor(all/50);\n            const hasBlue = bluesCount>0;\n            all -= 50 * bluesCount;\n            const greensCount = Math.floor(all/25);\n            const hasGreen = greensCount>0;\n            all -= 25 * greensCount;\n\n            const blacksCount =  Math.floor(all/10);\n            const hasBlack = blacksCount>0;\n            all -= 10 * blacksCount;\n\n            const redsCount =  Math.floor(all/5);\n            const hasRed = redsCount>0;\n\n            all -= 5 * redsCount;\n            const greysCount = all;\n            const hasGrey = greysCount >0;\n            const { name, imageUrl } = groupPlayers.find(p=>p.id === player.playerId);\n            return {...player, hasBlue, bluesCount,hasGreen, greensCount,hasBlack, blacksCount,hasRed, redsCount,hasGrey, greysCount, name, imageUrl}\n        }).sort((playerA,playerB) => playerA.name > playerB.name ? -1 : 1 ).map((player, index)=>{\n            const onImageError = (ev)=>{\n                if (player.imageUrl && player.imageUrl.length>1 && !ev.target.secondTry){\n                    ev.target.secondTry = true;\n                    ev.target.src=player.imageUrl;\n                }else{\n                    ev.target.src=ANON_URL;\n                }\n            };\n            const image =  <img alt={player.name} className=\"activeGameCircleImage\" src={player.imageUrl || ANON_URL}  onError={onImageError} />\n            const positive = player.cashOut - player.buyIn > 0;\n            const balance = player.cashOut ? `${positive ? '+':''}${player.cashOut - player.buyIn}₪` : '';\n                return  (<div key={`player${index}`}>\n                        <div className={`player player-${(index + 1)}`}>\n                            <div className=\"balance-value\">{balance}</div>\n                           <div className=\"bank\">\n                               <div className=\"bank-value\">{ player.buyIn}</div>\n                               {player.hasBlue ? <div className=\"jetons v-50\">x{player.bluesCount}</div> :<div/>}\n                               {player.hasGreen ?<div className=\"jetons v-25\">x{player.greensCount}</div> :<div/>}\n                               {player.hasBlack ?<div className=\"jetons v-10\">x{player.blacksCount}</div> :<div/>}\n                               {player.hasRed ?<div className=\"jetons v-5\">x{player.redsCount}</div> :<div/>}\n                               {player.hasGrey ?<div className=\"jetons v-1\">x{player.greysCount}</div> :<div/>}\n                           </div>\n                           <div className=\"avatar\">{image}</div>\n                           <div className=\"name\">{player.name.split(' ')[0]}</div>\n\n                        </div>\n                    </div>);\n        });\n\n       return (\n           <div className=\"vue-container\">\n               <div className=\"table\">\n                   <div className=\"players\">\n                       {players}\n                   </div>\n                </div>\n           </div>);\n    };\n\n    onEditClicked = ()=>{\n        this.props.onGameEditClick();\n    }\n    onBackClicked = ()=>{\n        if ( this.interval ){\n            clearInterval(this.interval);\n            this.interval = null;\n        }\n        this.props.onBack();\n    };\n\n    render = () =>{\n\n\n        const {onBack, game, group} = this.props;\n        const {isAdmin} = group;\n        if (!game){\n            return (\n                <div>\n                    no game\n                    <div className=\"backButton\">\n                        <GrayBubbleButton className=\"button\" onClick={onBack}> Back</GrayBubbleButton>\n                    </div>\n                </div>);\n        }\n        const totalCashouts = game.playersData.map(pd=>pd.cashOut).reduce((total, num)=>  total + num, 0);\n        const totalBuyIn = game.playersData.map(pd=>pd.buyIn).reduce((total, num)=>  total + num, 0);\n\n        const players =  this.getAsPokerTable() ;\n        const mobilePlayers = this.getPlayersDataAsList()\n        const isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n        if (!isMobile && !this.interval ){\n            this.interval = setInterval(this.props.updateOnProgressGame,5000);\n            setTimeout(()=>{\n                console.log('going to show the game now..');\n                document.getElementById(\"ongoingGameTopBuffer\").scrollIntoView();\n            } ,1000)\n        }\n\n        return (\n            <div className=\"viewGamePopupInner\" >\n                <div id=\"ongoingGameTopBuffer\" > </div>\n                <div >\n                    <h3 >Ongoing game..  {(typeof game.date === 'string' ? new Date(game.date) : game.date).AsGameName()}</h3>\n                    <h4>{game.playersData.length} Players. {game.description} </h4>\n                    <br/>\n                    <div className=\"backButton\">\n                        <GrayBubbleButton className=\"button \" onClick={this.onBackClicked}> Back</GrayBubbleButton>\n                        <GrayBubbleButton className=\"button left-margin\" onClick={this.onEditClicked}> Edit</GrayBubbleButton>\n                        {isAdmin && <RedBubbleButton onClick={this.props.deleteSelectedGame} className=\"button left-margin\">Delete</RedBubbleButton>}\n\n                        { isMobile ? <div className=\"potInTheMiddle\">{totalBuyIn-totalCashouts}₪ In Pot</div> : <div/>}\n                    </div>\n                    <div className=\"backButton\">\n                        { !isMobile ? <GrayBubbleButton className=\"button\" onClick={()=>{  document.getElementById(\"ongoingGameTopBuffer\").scrollIntoView(); }}> Focus On Table</GrayBubbleButton> :<div></div>}\n                    </div>\n\n                </div>\n                { isMobile ? mobilePlayers : players}\n                { isMobile ? <div/> : <div className=\"potInTheMiddle\">{totalBuyIn-totalCashouts}₪ In Pot</div>}\n\n\n            </div>);\n\n    }\n}\n\nexport default OnGoingGame;\n\n","import React, { Component } from 'react';\nimport ShowErrorAlert from '../containers/ShowErrorAlert';\nimport ShowSuccessAlert from '../containers/ShowSuccessAlert';\nimport GrayBubbleButton from '../containers/GrayBubbleButton';\nimport GreenBubbleButton from '../containers/GreenBubbleButton';\n\nclass NewGameForm extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            newGame: props.newGame,\n            showError: null,\n            showSuccess: null\n        }\n    }\n\n    handleNewGameDateChange = (event) =>{\n        const newGame = { ...this.state.newGame, date: event.target.value };\n        this.setState({newGame});\n    };\n\n    handleNewGameDescriptionChange = (event) =>{\n        const newGame = { ...this.state.newGame, description: event.target.value };\n        this.setState({newGame});\n    };\n\n    createNewGame = () => {\n        const { group, provider, token, remoteCreateGame, updateGroupGame } = this.props;\n        const game = {\n            date: `${this.state.newGame.date}T20:00:00.000Z`,\n            description: this.state.newGame.description,\n            playersData:[]\n        };\n        remoteCreateGame(group.id, game, provider, token).then((g)=>{\n            updateGroupGame(g);\n            console.log('create game was ok')\n            this.setState({ showSuccess: true});\n            setTimeout(()=>{\n                this.setState({ showSuccess: null});\n                this.props.close();\n            },10)\n        }).catch((e)=>{\n            console.log('create game was NOT ok',e)\n            this.setState({ showError: true});\n            setTimeout(()=>{\n                this.setState({ showError: null});\n                this.props.close();\n            },10)\n        })\n    }\n\n    render(){\n        const { showError, showSuccess} = this.state;\n        const legal = this.state.newGame.date && this.state.newGame.date.length === 10;\n        return (<div id=\"new-game-form\">\n            <h2> Create a new game. </h2>\n            <div className=\"new-game-section\">\n                Game date:\n                <input  className=\"left-margin\" type=\"date\" id=\"newGameDate\" min=\"2010-01-01\" max=\"2050-01-01\" value={this.state.newGame.date} onChange={this.handleNewGameDateChange}/>\n            </div>\n            <div className=\"new-game-section\">\n                description:\n                <input  type=\"text\" id=\"newGameExtra\" className=\"bordered-input left-margin left-pad\" value={this.state.newGame.description} onChange={this.handleNewGameDescriptionChange}/>\n            </div>\n            <div className=\"new-game-section\">\n\n                <GrayBubbleButton className=\"left-margin\"  onClick={this.props.close}> Cancel </GrayBubbleButton>\n                <GreenBubbleButton className=\"left-margin\"  onClick={this.createNewGame} disabled={!legal}> Create </GreenBubbleButton>\n            </div>\n\n            { showError && <ShowErrorAlert message={\"failed to create new game\"}/>}\n            { showSuccess && <ShowSuccessAlert message={\"game created successfully\"}/>}\n        </div>);\n    }\n}\n\nexport default NewGameForm;\n","import React, { Component } from 'react';\nimport InputRange from 'react-input-range';\nimport 'react-input-range/lib/css/index.css';\nimport CONSTS from '../CONSTS';\nimport postImage from \"../actions/postImage\";\nimport ImageUploader from \"./ImageUploader\";\nimport ShowErrorAlert from '../containers/ShowErrorAlert';\nimport ShowSuccessAlert from '../containers/ShowSuccessAlert';\nimport GrayBubbleButton from '../containers/GrayBubbleButton';\nimport GreenBubbleButton from '../containers/GreenBubbleButton';\n\nconst { ANON_URL } = CONSTS;\n\nclass EditGameForm extends Component {\n\n    constructor(props) {\n        super(props);\n        const existingPlayerId = this.findPlayerNotInGame(props.editGame);\n        this.state = {\n            editGame: props.editGame,\n            existingPlayerId,\n            gameSummary: null,\n            editPlayerInGame: null,\n            imageUploaderData: null,\n            showError: null,\n            showSuccess: null,\n        }\n    }\n\n    updateSelectedGamePlayerData = ()=>{\n        const editGame = {...this.state.editGame};\n        const { playerId, cashOut, buyIn } = this.state.editPlayerInGame;\n\n        editGame.playersData = editGame.playersData.map(pd => {\n            if (pd.playerId !== playerId) return pd;\n            return {...pd, cashOut, buyIn };\n        });\n        console.log('updateSelectedGamePlayerData', editGame)\n        this.setState({editGame,editPlayerInGame:null});\n    }\n\n    getEditPlayerInGame = ()=>{\n        const game = this.state.editGame;\n        const { playerId, buyIn } = this.state.editPlayerInGame;\n        const player = this.props.group.players.find(p=>p.id===playerId);\n\n        const onImageError = (ev)=>{\n            if (!ev.target.secondTry){\n                ev.target.secondTry = true;\n                ev.target.src= player.imageUrl;\n            }else{\n                ev.target.src=ANON_URL;\n            }\n        };\n\n        const image = <img alt={player.name} className=\"playersListImageBig\" src={player.imageUrl || ANON_URL}  onError={onImageError} /> ;\n        const currentPlayerBuyIn = buyIn;\n        const maxBuyInRange = currentPlayerBuyIn+100;\n        const totalBuyIn = game.playersData.map(data=> data.buyIn).reduce((all,item)=>(all+item),0);\n\n        const maxCashOutRange = (totalBuyIn);\n\n        return (<div className=\"edit-player-in-game\">\n            <div>\n                <h1>{image}{player.name}</h1>\n            </div>\n            <hr/>\n            <div>\n                buy-in:   <input className=\"editPlayerInput\" type=\"number\"  id=\"buyIn\"\n                                 value={this.state.editPlayerInGame.buyIn}\n                                 onChange={(event)=>{\n                                     const editPlayerInGame = {...this.state.editPlayerInGame};\n                                     editPlayerInGame.buyIn=parseInt(event.target.value, 10);\n                                     this.setState({ editPlayerInGame });\n                                 }}/>\n\n                <GrayBubbleButton className=\"button left-margin\" onClick={()=>{\n                    const editPlayerInGame = {...this.state.editPlayerInGame};\n                    editPlayerInGame.buyIn -= 10;\n                    if (editPlayerInGame.buyIn < 0){\n                        editPlayerInGame.buyIn = 0;\n                    }\n                    this.setState({ editPlayerInGame });\n                }}> -10 </GrayBubbleButton>\n                <GrayBubbleButton className=\"button left-margin\" onClick={()=>{\n                    const editPlayerInGame = {...this.state.editPlayerInGame};\n                    editPlayerInGame.buyIn += 10;\n                    this.setState({ editPlayerInGame });\n                }}> +10 </GrayBubbleButton>\n                <br/>\n                <br/>\n                <InputRange className=\"InputRange\"\n                            step={10}\n                            formatLabel={value => `${value}₪`}\n                            maxValue={maxBuyInRange}\n                            minValue={0}\n                            value={this.state.editPlayerInGame.buyIn}\n                            onChange={(buyIn) => {\n                                const editPlayerInGame = {...this.state.editPlayerInGame};\n                                editPlayerInGame.buyIn=buyIn;\n                                this.setState({ editPlayerInGame });\n                            }} />\n\n                <br/>\n                <br/>  <br/>\n                <br/>\n            </div>\n            <div>\n                cash-out:  <input className=\"editPlayerInput\" type=\"number\"  id=\"cashOut\"\n                                  value={this.state.editPlayerInGame.cashOut}\n                                  onChange={(event)=>{\n                                      const editPlayerInGame = {...this.state.editPlayerInGame};\n                                      editPlayerInGame.cashOut=parseInt(event.target.value, 10);\n                                      this.setState({ editPlayerInGame });\n                                  }}/>\n\n                <GrayBubbleButton className=\"button left-margin\" onClick={()=>{\n                    const editPlayerInGame = {...this.state.editPlayerInGame};\n                    editPlayerInGame.cashOut -= 10;\n                    if (editPlayerInGame.cashOut < 0){\n                        editPlayerInGame.cashOut = 0;\n                    }\n                    this.setState({ editPlayerInGame });\n                }}> -10 </GrayBubbleButton>\n\n                <GrayBubbleButton className=\"button left-margin\" onClick={()=>{\n                    const editPlayerInGame = {...this.state.editPlayerInGame};\n                    editPlayerInGame.cashOut += 10;\n                    this.setState({ editPlayerInGame });\n                }}> +10 </GrayBubbleButton>\n                <br/>\n                <br/>\n                <InputRange className=\"InputRange\"\n                            step={10}\n                            formatLabel={value => `${value}₪`}\n                            maxValue={maxCashOutRange}\n                            minValue={0}\n                            value={this.state.editPlayerInGame.cashOut}\n                            onChange={cashOut => {\n                                const editPlayerInGame = {...this.state.editPlayerInGame};\n                                editPlayerInGame.cashOut=cashOut;\n                                this.setState({ editPlayerInGame });\n                            }} />\n\n            </div>\n            <div>\n                <br/> <br/>\n                balance: {this.state.editPlayerInGame.cashOut - this.state.editPlayerInGame.buyIn}\n            </div>\n            <div>\n                <GrayBubbleButton className=\"button\" onClick={()=> this.setState({editPlayerInGame:null})}> Cancel</GrayBubbleButton>\n                <GreenBubbleButton className=\"button left-margin\" onClick={this.updateSelectedGamePlayerData}> Save Player</GreenBubbleButton>\n                <GreenBubbleButton className=\"button left-margin\" onClick={()=>{\n                    this.updateSelectedGamePlayerData();\n                    setTimeout(()=>{\n                        this.updateSelectedGame();\n                    },500)\n                }}> Save Game</GreenBubbleButton>\n\n            </div>\n        </div>);\n    }\n\n\n    showImageUploaderForm = ({ gameId })=>{\n        this.setState({ imageUploaderData: { gameId }});\n    }\n\n    hideImageUploaderForm = ()=>{\n        this.setState({ imageUploaderData: null});\n    }\n\n    findPlayerNotInGame = (game)=>{\n        const {group} = this.props;\n        const PLAYERS = {};\n        const GAME_PLAYERS = {};\n        group.players.forEach(player=>{\n            PLAYERS[player.id] = player;\n        });\n\n        game.playersData.forEach(player=>{\n            GAME_PLAYERS[player.playerId] = player;\n        });\n        const playa = group.players.find(player => !GAME_PLAYERS[player.id]);\n\n        return playa ? playa.id : null;\n\n    };\n\n    showImageUploaderForm = ({ gameId })=>{\n        this.setState({ imageUploaderData: { gameId }});\n    }\n\n    handleNewPlayerChange = (existingPlayerId)=> {\n        this.setState({existingPlayerId});\n    };\n\n    addCurrentPlayerToGame = () =>{\n        if (!this.state.existingPlayerId){\n            console.log('no existingPlayerId')\n            return;\n        }\n        const {group} = this.props;\n\n        const editGame = {...this.state.editGame};\n        editGame.playersData.push({\n            buyIn: 50,\n            cashOut: 0,\n            gameId: editGame.id,\n            groupId: group.id,\n            playerId: this.state.existingPlayerId,\n            index: editGame.playersData.length,\n        });\n        console.log('editGame', editGame)\n        const existingPlayerId = this.findPlayerNotInGame(editGame);\n        console.log('new existingPlayerId', existingPlayerId);\n        this.setState({existingPlayerId, editGame});\n    };\n\n    updateSelectedGame = () =>{\n        const { group, provider, token, remoteUpdateGame, updateGroupGame } = this.props;\n        const data = {\n            id: this.state.editGame.id,\n            date: `${this.state.editGame.date}T20:00:00.000Z`,\n            description: this.state.editGame.description,\n            playersData:this.state.editGame.playersData\n        };\n        console.log('calling update game with body:', data);\n        remoteUpdateGame(group.id, data.id, data, provider, token).then((game)=>{\n            // this.setState({ newGame: null, editGame: null, gameSummary:game});\n            updateGroupGame(game);\n            console.log('updated game was ok', game)\n            this.setState({ showSuccess: true, editGame: game});//TODO: date\n            setTimeout(()=>{\n                this.setState({ showSuccess: null});\n                this.props.close();\n            },10)\n        }).catch((e)=>{\n            console.log('update game was NOT ok',e)\n            this.setState({ showError: true});\n            setTimeout(()=>{\n                this.setState({ showError: null});\n                this.props.close();\n            },10)\n        })\n\n    };\n\n    getGamePot = (game)=>{\n        return game.playersData.reduce((all, one)=>{\n            return all + one.buyIn;\n        }, 0);\n    }\n\n    uploadImage = async (image, tags) =>{\n        return postImage(image, tags, false, this.props.provider, this.props.token)\n    }\n\n\n    handleEditGameDateChange = (event) =>{\n        const editGame = { ...this.state.editGame, date: event.target.value };\n        this.setState({editGame});\n    };\n\n    handleEditGameDescriptionChange = (event) =>{\n        const editGame = { ...this.state.editGame, description: event.target.value };\n        this.setState({editGame});\n    };\n\n    getGameDiff = (game)=>{\n        const totalBuyIn = game.playersData.map(pd=>pd.buyIn).reduce((total, num)=>  total + num, 0);\n        const totalCashOut =game.playersData.map(pd=>pd.cashOut).reduce((total, num)=>  total + num, 0);\n        return totalBuyIn - totalCashOut;\n    };\n\n    removePlayerFromGame = (playerId) =>{\n        const editGame = this.state.editGame;\n        editGame.playersData = editGame.playersData.filter(player => player.playerId !==playerId);\n        const existingPlayerId = this.findPlayerNotInGame(editGame);\n        this.setState({editGame, existingPlayerId})\n    }\n\n    editGamePlayer = (playerId) =>{\n        const game = this.state.editGame;\n        const playerData = game.playersData.find(p=>p.playerId===playerId);\n        const editPlayerInGame = { playerId, buyIn: playerData.buyIn,cashOut: playerData.cashOut };\n        this.setState({editPlayerInGame });\n    }\n\n    render(){\n        const { group } = this.props;\n\n        if (this.state.editPlayerInGame){\n            return this.getEditPlayerInGame()\n        }\n\n        if (this.state.imageUploaderData){\n            return <ImageUploader group={group} {...this.state.imageUploaderData} close={this.hideImageUploaderForm} uploadImage={this.uploadImage} updateImage={this.props.updateImage}/>\n        }\n\n        const isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n        const PLAYERS = {};\n        const GAME_PLAYERS = {};\n        group.players.forEach(player=>{\n            PLAYERS[player.id] = player;\n        });\n        const game = this.state.editGame;\n        if (!game){\n            console.log('render, no editGame on state')\n            return <div/>;\n        }\n\n        game.playersData.forEach(player=>{\n            GAME_PLAYERS[player.playerId] = player;\n        });\n        const players = game.playersData.map(playerData=>{\n            const playerName = PLAYERS[playerData.playerId].name;\n            const playerImageUrl = PLAYERS[playerData.playerId].imageUrl;\n            const onImageError = (ev)=>{\n                if (!ev.target.secondTry){\n                    ev.target.secondTry = true;\n                    ev.target.src= playerImageUrl;\n                }else{\n                    ev.target.src=ANON_URL;\n                }\n            };\n\n            const image =  <img alt={playerName} className=\"playersListImage\" src={playerImageUrl || ANON_URL} onError={onImageError} /> ;\n\n            return (<div key={`_playerData_${playerData.playerId}`} className=\"editGamePlayerSection\">\n                <GreenBubbleButton className=\"button edit-player-in-game-form\" onClick={()=>this.editGamePlayer(playerData.playerId)}> edit </GreenBubbleButton>\n                {image}\n                { isMobile && <br/>}\n                {playerName}\n                <span className=\"gray-seprator\"> |</span>\n                { isMobile && <br/>}\n                buy-in: {playerData.buyIn} <span className=\"gray-seprator\"> |</span>\n                { isMobile && <br/>}\n                cash-out: {playerData.cashOut} <span className=\"gray-seprator\"> |</span>\n                { isMobile && <br/>}\n                balance: {playerData.cashOut - playerData.buyIn}\n\n                <GrayBubbleButton className=\"button remove-player-from-game\" onClick={()=>this.removePlayerFromGame(playerData.playerId)}> remove </GrayBubbleButton>\n\n            </div>);\n        });\n\n\n        const comboVals = group.players.filter(player => !GAME_PLAYERS[player.id]).map(player =>\n            (\n                <option key={`_comboVals_${player.id}`} value={player.id}>\n                    { player.name }\n                </option>\n            )\n        );\n        const { ready } = game;\n        const diff = this.getGameDiff(game);\n        const { showError, showSuccess} = this.state;\n        return (<div className=\"game-edit-div\">\n            <h2> edit game. </h2>\n            <div className=\"new-game-section\">\n                Game date:\n                <input  className=\"left-margin\" type=\"date\" id=\"newGameDate\" min=\"2010-01-01\" max=\"2050-01-01\" value={this.state.editGame.date} onChange={this.handleEditGameDateChange}/>\n            </div>\n            <div className=\"new-game-section\">\n                description:\n                <input  type=\"text\" id=\"newGameExtra\" className=\"bordered-input left-margin left-pad\" value={this.state.editGame.description} onChange={this.handleEditGameDescriptionChange}/>\n            </div>\n            <div>\n                <div>\n                    <u>{players.length} Players:</u>\n                </div>\n                <div>\n                    {players}\n                </div>\n            </div>\n\n            <hr/>\n            {\n                comboVals.length >0 ? (\n                    <div>\n                        <select name=\"player\" value={this.state.existingPlayerId} onChange={(e)=>this.handleNewPlayerChange(e.target.value)}>\n                            {comboVals}\n                        </select>\n                        <GreenBubbleButton className=\"button left-margin\" onClick={this.addCurrentPlayerToGame}> Add player</GreenBubbleButton>\n                    </div>\n                ) :<div>no more players</div> }\n            <hr/>\n            <div>\n                <GrayBubbleButton className=\"button left-margin\" onClick={this.props.close}> Cancel</GrayBubbleButton>\n                <GreenBubbleButton className=\"button left-margin\" onClick={this.updateSelectedGame}> Save</GreenBubbleButton>\n            </div>\n            <div>\n                <br/>\n                <h3>{ready ? '' : `game still not done (${diff>0 ? diff : -1*diff} ${diff>0 ? 'still in pot':'missing from pot'}).`}</h3>\n            </div>\n            <GreenBubbleButton onClick={()=>this.showImageUploaderForm({ gameId: game.id})} >upload image for this game</GreenBubbleButton>\n            { showError && <ShowErrorAlert message={\"failed to update game\"}/>}\n            { showSuccess && <ShowSuccessAlert message={\"game updated successfully\"}/>}\n        </div>);\n\n    }\n}\n\nexport default EditGameForm;\n","import React from 'react'\nimport { useAlert } from 'react-alert'\n\nconst ShowAlert = (props) => {\n    const alert = useAlert();\n    const {message} = props;\n    setTimeout(()=>{\n            alert.show(message);\n    },1);\n    return (\n        <div/>\n    )\n}\n\nexport default ShowAlert;\n","/* eslint-disable no-restricted-globals */\nimport React, { Component } from 'react';\nimport 'react-input-range/lib/css/index.css';\nimport OnGoingGame from \"./OnGoingGame\";\nimport GameSummary from \"./GameSummary\";\nimport NewGameForm from \"./NewGameForm\";\nimport createGame from \"../actions/createGame\";\nimport updateGame from \"../actions/updateGame\";\nimport EditGameForm from \"./EditGameForm\";\nimport ShowAlert from '../containers/ShowAlert';\nimport ShowErrorAlert from '../containers/ShowErrorAlert';\nconst isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\nclass GamesTab extends Component {\n\n    getImage=()=>{\n\n        this.imageIndex++;\n\n        if (this.imageIndex > this.imagesCount) {\n            this.imageIndex = 1;\n        }\n        return `backgroundImage${this.imageIndex}.jpg`;\n    };\n\n    gameDateToString = (game)=>{\n        const addLeaddingZero = (num)=>{\n            const str = `${num}`;\n            if (str.length === 2){\n                return str;\n            } else{\n                return `0${str}`;\n            }\n        };\n\n        const isoDate = typeof  game.date === 'string' ? game.date.substr(0,10) :  game.date.toISOString();\n        const year = parseInt(isoDate.substr(0, 4), 10);\n        const month = addLeaddingZero(parseInt(isoDate.substr(5, 2), 10));\n        const day = addLeaddingZero(parseInt(isoDate.substr(8, 2), 10));\n        // const time = game.date.toTimeString();\n\n        return `${day}/${month}/${year}`;\n    }\n\n    constructor(props) {\n        super(props);\n        this.imageIndex = 0;\n        this.imagesCount = 7;\n        this.backgroundImage = `url(${props.group.imageUrl ||  `poker.jpg`})`;\n        this.state = { newGame: null, editGame: null, gameSummary: null, showErrorOnDeleteGame: null, showSuccessDeleteGame: null };\n\n        setTimeout(()=>{\n            props.setClearAll(this.clearAll);\n        },100)\n\n    }\n\n    clearAll = () =>{\n        this.setState({newGame: null, editGame: null, gameSummary: null})\n    }\n\n    showCreateGame = () =>{\n        const str = ((new Date()).toISOString()).substring(0,10)\n        this.setState({ newGame: { date:str, description: 'Hosted by ..'} })\n    };\n\n    closeCreateGameForm = () =>{\n        this.setState({ newGame: null })\n    };\n\n    closeEditGameForm = () =>{\n        this.setState({ editGame: null })\n    };\n\n    handleEditGameDateChange = (event) =>{\n        const editGame = { ...this.state.editGame, date: event.target.value };\n        this.setState({editGame});\n    };\n\n    handleEditGameDescriptionChange = (event) =>{\n        const editGame = { ...this.state.editGame, description: event.target.value };\n        this.setState({editGame});\n    };\n\n    handleNewPlayerChange = (existingPlayerId)=> {\n        this.setState({existingPlayerId});\n    };\n\n    onGameEditClick = (game)=>{\n        const editGame = {...game}\n        editGame.date = typeof game.date === 'string' ? game.date.substr(0,10) : ((game.date).toISOString()).substring(0,10);\n        const existingPlayerId = this.findPlayerNotInGame(editGame);\n\n        this.setState({editGame, existingPlayerId});\n    };\n\n    showGameData = (game) =>{\n        this.setState({ gameSummary: game })\n    };\n\n    updateOnProgressGame = ()=>{\n        if (!this.state.gameSummary){\n            return;\n        }\n        const {group, getGame, provider, token} = this.props;\n        const onGoingGameId = this.state.gameSummary.id;\n        getGame(group.id, onGoingGameId, provider, token).then((gameSummary)=>{\n            gameSummary.date = new Date(gameSummary.date);\n            this.setState({gameSummary});\n        })\n    };\n\n    deleteSelectedGame = ()=>{\n        if (confirm(\"Are you sure?\")){\n            try{\n                const { group, provider, token, remoteDeleteGame, removeGroupGame } = this.props;\n                const gameId = this.state.gameSummary.id;\n                remoteDeleteGame(group.id, gameId, provider, token).then(()=>{\n                    this.setState({ newGame: null, editGame: null, gameSummary:null, showErrorOnDeleteGame: null, showSuccessDeleteGame: true});\n                    setTimeout(()=>{\n                        this.setState({ showErrorOnDeleteGame: null, showSuccessDeleteGame: null});\n                        removeGroupGame(gameId);\n                    },100)\n                }).catch((e)=>{\n                    this.setState({ showErrorOnDeleteGame: true, showSuccessDeleteGame: null});\n                    setTimeout(()=>{\n                        this.setState({ showErrorOnDeleteGame: null, showSuccessDeleteGame: null});\n                    },100)\n                })\n            }catch(error){\n                console.error('deleteSelectedGame error', error);\n            }\n        }\n    };\n\n    findPlayerNotInGame = (game)=>{\n        const {group} = this.props;\n        const PLAYERS = {};\n        const GAME_PLAYERS = {};\n        group.players.forEach(player=>{\n            PLAYERS[player.id] = player;\n        });\n\n        game.playersData.forEach(player=>{\n            GAME_PLAYERS[player.playerId] = player;\n        });\n        const playa = group.players.find(player => !GAME_PLAYERS[player.id]);\n\n        return playa ? playa.id : null;\n\n    };\n\n    getGameDiff = (game)=>{\n        const totalBuyIn = game.playersData.map(pd=>pd.buyIn).reduce((total, num)=>  total + num, 0);\n        const totalCashOut =game.playersData.map(pd=>pd.cashOut).reduce((total, num)=>  total + num, 0);\n        return totalBuyIn - totalCashOut;\n    };\n\n    getGamePot = (game)=>{\n        return game.playersData.reduce((all, one)=>{\n            return all + one.buyIn;\n        }, 0);\n    }\n\n    getGamesSummary = () =>{\n        return <GameSummary\n            game={this.state.gameSummary}\n            group={this.props.group}\n            back={()=>this.setState({editGame:null, gameSummary:null})}\n            edit={()=>this.onGameEditClick(this.state.gameSummary)}\n            delete={this.deleteSelectedGame}\n        />;\n    }\n\n    render(){\n\n        const { group } = this.props;\n        const {games} = group;\n\n        if (this.state.newGame){\n            return <NewGameForm group={group}\n                                close={this.closeCreateGameForm}\n                                newGame={this.state.newGame}\n                                remoteCreateGame={createGame}\n                                updateGroupGame={this.props.updateGroupGame}\n                                user={this.props.user}\n                                provider={this.props.provider}\n                                token={this.props.token} />\n        }\n        if (this.state.editGame){\n            return <EditGameForm editGame={this.state.editGame}\n                                 group={group}\n                                 close={this.closeEditGameForm}\n                                 remoteUpdateGame={updateGame}\n                                 updateGroupGame={this.props.updateGroupGame}\n                                 updateImage={this.props.updateImage}\n                                 user={this.props.user}\n                                 provider={this.props.provider}\n                                 token={this.props.token}\n            />;\n        }\n\n        if (this.state.gameSummary){\n            const game = this.state.gameSummary;\n            const { ready } = game;\n            if (ready) return this.getGamesSummary();\n            return <OnGoingGame deleteSelectedGame={this.deleteSelectedGame}\n                                updateImage={this.props.updateImage}\n                                group={group}\n                                user={this.props.user}\n                                gameId={game.id}\n                                game={game}\n                                onBack={()=>this.setState({gameSummary: null})}\n                                updateOnProgressGame={this.updateOnProgressGame}\n                                onGameEditClick={()=>this.onGameEditClick(game)}/>\n\n\n        }\n\n        const GAMES = games.sort((a,b)=> a.date > b.date ? -1 : 1).map((game,index) => {\n            const { ready } = game;\n            const pot = this.getGamePot(game);\n            const style = {\n                backgroundImage: `url(${game.imageUrl || this.getImage()})`,\n                borderRadiusTop: '50px',\n            };\n\n            let mvpPlayerId, mvpPlayerData, mvpName, mvpBalance, mvpImageUrl;\n            if (ready){\n                mvpPlayerId = game.mvpPlayerId;\n\n                mvpPlayerData = group.players.find(p=>p.id === mvpPlayerId);\n\n                const mvp = game.playersData.find(item => item.playerId===mvpPlayerId);\n                const mvpBottomLine = mvp.cashOut - mvp.buyIn;\n\n                mvpName = mvpPlayerData ?\n                    mvpPlayerData.name ? mvpPlayerData.name : ( mvpPlayerData.firstName ? `${mvpPlayerData.firstName} ${mvpPlayerData.familyName}` : null)\n                    : null;\n                mvpBalance = `+${mvpBottomLine}`;\n                mvpImageUrl = mvpPlayerData ? mvpPlayerData.imageUrl : null;\n                if (mvpImageUrl && !game.imageUrl){\n                    style.backgroundImage = `url(${mvpImageUrl}), url(${this.getImage()})`\n                    style.backgroundSize = isMobile ? '60px 100px, cover': '160px 280px, cover'\n                    style.backgroundRepeat = 'no-repeat, repeat'\n                    style.backgroundPosition = 'right top'\n                    style.backgroundBlendMode = 'luminosity, normal'\n                }\n            }\n\n\n\n            return (\n                <div key={game.id}\n                     className={`game-item-div ${ready?'':'game-item-div-not-ready'}`}\n                     onClick={()=>this.showGameData(game)}\n\n                >\n                    <div key={game.id} className=\"game-item-div-inner\" style={style}>\n                        <div><b>{this.gameDateToString(game) }</b></div>\n                        <div className=\"group-description\">{game.description } </div>\n                        <div className=\"my-group\">{pot} in pot</div>\n\n                    </div>\n\n                    <div className=\"game-extra-data\">\n\n                        <div > {game.playersData.length } players </div>\n                        <div className='game-not-ready-text' >{ready ? '' : 'GAME NOT READY'} </div>\n                        <div className='game-mvp-text' >\n                            {ready && mvpPlayerData && mvpName ?\n                                <span>\n                                    <b>MVP</b>\n                                    {isMobile ? <div></div> : <span></span>}\n                                    <img src={mvpImageUrl} className=\"game-mvp\"/>\n\n                                    {mvpName} {mvpBalance}\n                                </span>\n\n                                : <span></span>}\n\n                        </div>\n                    </div>\n                </div>\n            );\n\n        });\n        const { showErrorOnDeleteGame, showSuccessDeleteGame } = this.state;\n        return (<div id=\"all-games-div\" >\n            <div className=\"row\">\n                <div className=\"col-xs-6\">\n                    <div className=\"game-item-div\" onClick={this.showCreateGame}>\n\n                        <img src=\"plus.png\" className=\"game-item-div-plus-sign\"/>\n                    </div>\n                </div>\n\n                {GAMES}\n                { showErrorOnDeleteGame && <ShowErrorAlert message={\"failed to remove game\"}/>}\n\n                { showSuccessDeleteGame && <ShowAlert message={\"game was removed\"}/>}\n\n            </div>\n        </div>)\n\n    }\n}\n\nexport default GamesTab;\n","/* eslint-disable no-console */\n/* eslint-disable prefer-promise-reject-errors */\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function createPlayer(groupId, playerData, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'POST',\n      url: `${URL_PREFIX}/groups/${groupId}/players`,\n      body: JSON.stringify(playerData),\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to create new player');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to create new player');\n        return reject(bodyObj.title);\n      }\n      return resolve(JSON.parse(body));\n    });\n  });\n}\n\nexport default createPlayer;\n","\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function updatePlayer(groupId, playerId, data, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'PATCH',\n      url: `${URL_PREFIX}/groups/${groupId}/players/${playerId}`,\n      body: JSON.stringify(data),\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to update player');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to update player');\n        return reject(bodyObj.title);\n      }\n      return resolve(JSON.parse(body));\n    });\n  });\n}\n\nexport default updatePlayer;\n","/* eslint-disable no-console */\n/* eslint-disable prefer-promise-reject-errors */\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function deletePlayer(groupId, playerId, provider, token) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'DELETE',\n      url: `${URL_PREFIX}/groups/${groupId}/players/${playerId}`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to delete player');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('failed to delete player', bodyObj);\n        return reject(bodyObj.title);\n      }\n      return resolve();\n    });\n  });\n}\n\nexport default deletePlayer;\n","\nimport React, { Component } from 'react';\nimport InputRange from 'react-input-range';\nimport ImageSlider from '../components/ImageSlider';\n\nimport {LineChart, Line, XAxis, YAxis, CartesianGrid, ReferenceLine } from 'recharts';\nimport GrayBubbleButton from '../containers/GrayBubbleButton';\nimport GreenBubbleButton from '../containers/GreenBubbleButton';\nimport RedBubbleButton from '../containers/RedBubbleButton';\n\n\nimport CONSTS from '../CONSTS';\nconst SmartPhone = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\nconst body = document.getElementsByTagName('body')[0];\nconst windowWidth = window.innerWidth || document.documentElement.clientWidth || body.clientWidth;\nconst Width = windowWidth;\nconst { ANON_URL } = CONSTS;\n\nclass PlayerSummary extends Component {\n\n    constructor(props){\n        super(props);\n\n        const player = this.props.player;\n        const group = this.props.group;\n        const playerId = player.id;\n\n        this.playerGames = group.games.map(game => {\n            const playerData = game.playersData.find(p => p.playerId === playerId);\n            return playerData ? {game, playerData} : false;\n        }).filter(x => !!x).sort((a,b)=>a.game.date < b.game.date ? -1 : 1);\n\n        this.yearsObject = {};\n        this.playerGames.forEach((game,index)=>{\n            const year = game.game.date.getYear() + 1900;\n            if (!this.yearsObject[year]){\n                this.yearsObject[year] = {\n                    from: index,\n                    to: index\n                }\n            } else{\n                this.yearsObject[year].to = index;\n            }\n        });\n\n\n        this.firstGame = this.playerGames.length >0 ? this.playerGames[0] : null;\n\n        this.state = { sliderValues: { min: 0, max: this.playerGames.length - 1 } }\n    }\n    render() {\n        const player = this.props.player;\n        const group = this.props.group;\n        const { isAdmin} = group;\n        const playerGames =  this.playerGames;\n\n        const firstGame = this.firstGame;\n\n        const playerGamesDivs = playerGames.map(({game, playerData}, index) => {\n            if (this.state.sliderValues.min <= index && index <= this.state.sliderValues.max){\n                return <div key={game.date} className=\"player-game-data\">\n                    {(typeof game.date === 'string' ? new Date(game.date) : game.date).AsGameName()} <span\n                    className=\"gray-seprator\"> |</span>\n                    {SmartPhone && game.description}\n                    {SmartPhone && <span className=\"gray-seprator\"> |</span>}\n                    {SmartPhone && <br/>}\n                    buy-in: {playerData.buyIn} <span className=\"gray-seprator\"> |</span>\n                    cash-out: {playerData.cashOut} <span className=\"gray-seprator\"> |</span>\n                    balance: {playerData.cashOut - playerData.buyIn}\n                    {!SmartPhone && <span className=\"gray-seprator\"> |</span>}\n                    {!SmartPhone && game.description}\n                </div>\n            }\n            return <div key={game.date}/>\n\n        });\n        let graph = <div/>;\n        const playerName = player.name;\n        let playerBalance = 0;\n        let rangeBalance = 0;\n\n        if (playerGames.length > 0) {\n            const data = [{name:\" B.C. \",[playerName]:0}];\n\n            playerGames.forEach((gameObject,index) =>{\n                const gameDate = gameObject.game.date.AsGameName();\n                const game = {name:gameDate};\n                const playerData = gameObject.playerData;\n                playerBalance += (playerData.cashOut - playerData.buyIn);\n                if (this.state.sliderValues.min <= index && index <= this.state.sliderValues.max){\n                    rangeBalance += (playerData.cashOut - playerData.buyIn);\n                    game[playerName] = rangeBalance;\n                    data.push(game);\n                }\n\n            });\n            graph = (\n                <div className=\"col-xs-11 \">\n                    <LineChart className=\"gameGraphLineChart\" width={SmartPhone ? Width : Width*(97/100)} height={SmartPhone ? 260 : 500} data={data}  >\n                        <XAxis dataKey=\"name\"/>\n                        <YAxis/>\n                        <CartesianGrid strokeDasharray=\"0 40\"/>\n                        <ReferenceLine y={0} label=\"Zero\" stroke=\"red\"/>\n\n                        <Line className=\"graphLine\" type=\"monotone\" key={playerName} dataKey={playerName}  stroke=\"black\"  />\n                    </LineChart>\n                </div>\n            );\n\n        }\n        const yearsButtons = Object.keys(this.yearsObject).sort().map(year=>{\n            return <GrayBubbleButton key={`year-${year}`} className=\"year-button\" onClick={()=> this.setState({ sliderValues: { min: this.yearsObject[year].from, max: this.yearsObject[year].to } })}>{year}</GrayBubbleButton>\n        });\n\n        return (\n            <div className=\"playerSummary\">\n                <div className=\"playerSummaryHeader\">\n                    <img alt=\"\" className=\"playerPageImage leftyImage\" src={player.imageUrl || ANON_URL}/>\n                    <div>\n                        name: {player.name}\n                    </div>\n                    <div>\n                        email: {player.email}\n                    </div>\n                    { firstGame ? (\n                        <div>\n                            <div>\n                                playing since {firstGame.game.date.AsGameName()}\n                            </div>\n                            <div>\n                                balance: {playerBalance} ({playerGames.length} games)\n                            </div>\n                        </div>\n                    ) : <div>no games yet</div>}\n\n\n\n\n\n                </div>\n                <hr/>\n                {/*`${this.playerGames[value.min].game.date.AsGameName()} - ${this.playerGames[value.max].game.date.AsGameName()} `*/}\n                { firstGame && (\n                    <div>\n                        <div><b>Date range specific data:</b><br/></div>\n                        <div>From {this.playerGames[this.state.sliderValues.min].game.date.AsGameName()} to {this.playerGames[this.state.sliderValues.max].game.date.AsGameName()}</div>\n                        <div>\n                            <InputRange className=\"InputRange\"\n                                        step={1}\n                                        formatLabel={() => ``}\n                                        maxValue={this.playerGames.length - 1}\n                                        minValue={0}\n                                        value={this.state.sliderValues}\n                                        onChange={sliderValues => {\n                                            if (this.state.sliderValues.min < this.state.sliderValues.max){\n                                                this.setState({ sliderValues });\n                                            }\n                                        }} />\n                        </div>\n                        <div>\n                            balance: {rangeBalance} ({this.state.sliderValues.max - this.state.sliderValues.min + 1} games)\n                        </div>\n                        <div>\n                            {graph}\n                        </div>\n                        <div>\n                            {yearsButtons}\n                        </div>\n                    </div>\n                )}\n\n                <div className=\"buttons-section\">\n                    <GrayBubbleButton onClick={this.props.back}>Back</GrayBubbleButton>\n                    {isAdmin &&\n                    <GrayBubbleButton onClick={this.props.edit} className=\"left-margin\">Edit</GrayBubbleButton>}\n                    {isAdmin && playerGames.length === 0 &&\n                    <RedBubbleButton onClick={this.props.delete} className=\"left-margin\">Delete</RedBubbleButton>}\n                </div>\n                <ImageSlider  group={this.props.group} playerId={this.props.player.id}  />\n                <div className=\"playerGames\">\n\n                    {playerGamesDivs}\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport default PlayerSummary;\n\n","/* eslint-disable no-restricted-globals */\nimport React, { Component } from 'react';\nimport createPlayer from \"../actions/createPlayer\";\nimport updatePlayer from \"../actions/updatePlayer\";\nimport deletePlayer from \"../actions/deletePlayer\";\nimport PlayerSummary from \"./PlayerSummary\";\nimport CONSTS from '../CONSTS';\nimport GrayBubbleButton from '../containers/GrayBubbleButton';\nimport GreenBubbleButton from '../containers/GreenBubbleButton';\nimport postImage from '../actions/postImage';\n\nconst baseUrl = window.location.origin === 'http://localhost:3000' ? 'http://www.poker-stats.com' : window.location.origin;\nconst { ANON_URL } = CONSTS;\nconst FULL_ANON_URL = `${baseUrl}/${ANON_URL}`;\n\nclass PlayersTab extends Component {\n\n    clearAll = () =>{\n        this.setState({newPlayer: null, editPlayer: null, playerSummary: null})\n    }\n\n    setupPlayers = ()=>{\n\n    }\n    constructor(props) {\n        super(props);\n        const {players} = this.props.group;\n        this.PLAYERS = (players || []).sort((a,b)=> a.gamesCount > b.gamesCount ? -1 : 1).map((player,index) => {\n            const style = {\n                backgroundImage: `url(${player.imageUrl || FULL_ANON_URL})`,\n                borderRadiusTop: '50px',\n            };\n\n            return (\n                <div key={`plyr_${player.playerId}`} id={`plyr_${player.id}`} className={`player-item-div`}  onClick={()=>this.showPlayerData(player)}>\n                    <div id={`plyr_${player.playerId}`} className=\"player-item-div-inner\" style={style}>\n                        <div><b>{player.name}</b></div>\n                        {  player.gamesCount ?\n                            (<div>\n                                <div>  {player.gamesCount} games</div>\n                                <div>  {player.balance}₪ </div>\n                            </div>) :\n                            <div>no games yet</div> }\n                    </div>\n                </div>\n            );\n\n        });\n\n\n        this.state = { newPlayer: null, editPlayer: null, playerSummary: null };\n        setTimeout(()=>{\n            props.setClearAll(this.clearAll);\n        },100)\n    }\n\n    showPlayerData = (player) =>{\n        this.setState({ playerSummary: player })\n    }\n\n    showCreatePlayer = () =>{\n        this.setState({ newPlayer: {  name: '', email: ''} });\n    }\n\n    onPlayerEditClick = (editPlayer) =>{\n        this.setState({ editPlayer });\n    }\n\n    onPlayerDeleteClick = async(playerId) =>{\n        if (confirm(\"Are you sure?\")){\n            try{\n                await deletePlayer(this.props.group.id, playerId, this.props.provider, this.props.token);\n                this.props.updatePlayerRemoved(playerId);\n                this.setState({playerSummary:null})\n            }catch(error){\n                console.error('deletePlayerById error',error);\n            }\n        }\n    }\n\n    createNewPlayer = () => {\n        const { group, provider, token, updatePlayerData } = this.props;\n        const player = {\n            name: this.state.newPlayer.name,\n            email: this.state.newPlayer.email,\n        }\n        console.log('calling create player with body:', player);\n        createPlayer(group.id, player, provider, token).then((player)=>{\n            this.setState({ newPlayer: null, editPlayer: null,playerSummary:null});\n            updatePlayerData(player);\n        });\n    }\n\n    getNewPlayerSection = () => {\n        const legal = this.state.newPlayer.name && this.state.newPlayer.name.length > 0;\n\n        return (<div id=\"new-player-form\">\n            <h2> Create a new player. </h2>\n\n            <div className=\"new-player-section\">\n                name:\n                <input  type=\"text\" id=\"newGameExtra\" className=\"bordered-input left-margin left-pad\" value={this.state.newPlayer.name} onChange={(event)=>{\n                    const newPlayer = {...this.state.newPlayer};\n                    newPlayer.name = event.target.value;\n                    this.setState({newPlayer})\n                }}/>\n            </div>\n            <div className=\"new-player-section\">\n                email:\n                <input  type=\"text\" id=\"newGameExtra\" className=\"bordered-input left-margin left-pad\" value={this.state.newPlayer.email}onChange={(event)=>{\n                    const newPlayer = {...this.state.newPlayer};\n                    newPlayer.email = event.target.value;\n                    this.setState({newPlayer})\n                }}/>\n            </div>\n            <div className=\"new-player-section\">\n\n                <GrayBubbleButton className=\"button left-margin\"  onClick={()=>this.setState({newPlayer: null})}> Cancel </GrayBubbleButton>\n                <GreenBubbleButton className=\"button left-margin\"  onClick={this.createNewPlayer} disabled={!legal}> Create </GreenBubbleButton>\n            </div>\n\n\n        </div>);\n    };\n\n    saveEditedPlayer = () =>{\n        const { group, provider, token, updatePlayerData } = this.props;\n        const player = {\n            id: this.state.editPlayer.id,\n            name: this.state.editPlayer.name,\n            email: this.state.editPlayer.email,\n            imageUrl: this.state.editPlayer.imageUrl,\n        }\n        console.log('saveEditedPlayer player', player)\n        updatePlayer(group.id, player.id, player, provider, token).then((p)=>{\n            this.setState({ newPlayer: null, editPlayer: null,playerSummary:null});\n            updatePlayerData(p);\n            setTimeout(()=>{\n                console.log('1 sec later');\n\n                window.location.reload(false);\n            },1000)\n\n        });\n    }\n\n    uploadImage = async (image) =>{\n        const tags = { playerIds:[], gameIds:[], groupIds:[] };\n        return postImage(image, tags, this.props.provider, this.props.token);\n    }\n     onReaderLoad = async(e) => {\n         const { provider, token } = this.props;\n         try {\n             const res = await postImage(e.target.result, {\n                 playerIds: [],\n                 gameIds: [],\n                 groupIds: []\n             }, true, provider, token);\n             console.log('res', res);\n             const newImageUrl = res.image;\n\n             const newState = {...this.state};\n             newState.editPlayer.imageUrl = newImageUrl;\n             this.setState(newState)\n\n         } catch (e) {\n             console.log('e', e);\n         }\n    }\n    readURL = (e) => {\n        e.preventDefault();\n        if (e.target.files && e.target.files[0]) {\n            const reader = new FileReader();\n            reader.onload = this.onReaderLoad;\n            reader.readAsDataURL(e.target.files[0]);\n\n        }\n    }\n\n\n    getPlayerEdit = () =>{\n        console.log('EditPlayer render');\n        return (\n            <div className=\"playerEditForm\">\n                <div className=\"playerSummaryHeader\">\n                    <div>\n                        name: {this.state.editPlayer.name}\n                        <input  type=\"text\" id=\"playerName\" className=\"bordered-input left-margin left-pad\" value={this.state.editPlayer.name} onChange={(event)=>{\n                            const editPlayer = {...this.state.editPlayer};\n                            editPlayer.name = event.target.value || '';\n                            this.setState({editPlayer});\n                        }}/>\n\n                    </div>\n                    <div>\n                        email:\n                        <input  type=\"text\" id=\"playerEmail\" className=\"bordered-input left-margin left-pad\" value={this.state.editPlayer.email} onChange={(event)=>{\n                            const editPlayer = {...this.state.editPlayer};\n                            editPlayer.email = event.target.value || '';\n                            this.setState({editPlayer});\n                        }}/>\n                    </div>\n                    <div>\n                        image URL:\n                        <input  type=\"text\" id=\"playerImage\" className=\"bordered-input left-margin left-pad\" value={this.state.editPlayer.imageUrl||''} onChange={(event)=>{\n                            const editPlayer = {...this.state.editPlayer};\n                            editPlayer.imageUrl = event.target.value || '';\n                            this.setState({editPlayer});\n                        }}/>\n                    </div>\n                    <div>\n                        OR <input type=\"file\" accept=\".png,.jpg,.jpeg\" id=\"imgInput\" onChange={this.readURL}/>\n                    </div>\n                    {this.state.editPlayer.imageUrl && this.state.editPlayer.imageUrl.length >0 && <img alt=\"\" className=\"playerPageImage\" src={this.state.editPlayer.imageUrl}/>}\n                </div>\n\n                <div className=\"buttons-section\">\n                    <GrayBubbleButton onClick={()=>this.setState({editPlayer:null})}>Back</GrayBubbleButton>\n                    <GreenBubbleButton onClick={this.saveEditedPlayer} className=\"left-margin\">Save</GreenBubbleButton>\n\n                </div>\n\n\n            </div>\n        );\n\n    }\n\n\n    render() {\n\n        if (this.state.newPlayer){\n            return this.getNewPlayerSection()\n        }\n        if (this.state.editPlayer){\n            return this.getPlayerEdit();\n        }\n\n        if (this.state.playerSummary){\n            return <PlayerSummary\n                player={this.state.playerSummary}\n                group={this.props.group}\n                back={()=>this.setState({playerSummary: null})}\n                edit={()=>this.onPlayerEditClick(this.state.playerSummary)}\n                delete={()=>this.onPlayerDeleteClick(this.state.playerSummary.id)}\n            />\n        }\n\n        return (<div id=\"all-games-div\" >\n            <div className=\"row\">\n                <div className=\"col-xs-6\">\n                    <div className=\"player-item-div\"\n                         onClick={this.showCreatePlayer}>\n                        <img src=\"plus.png\" className=\"player-item-div-plus-sign\"/>\n\n                    </div>\n                </div>\n\n                {this.PLAYERS}\n\n            </div>\n        </div>)\n\n\n    }\n}\n\nexport default PlayersTab;\n\n","\nimport React, { Component } from 'react';\nimport 'react-input-range/lib/css/index.css';\nimport getGame from '../actions/getGame';\nimport createGame from '../actions/createGame';\nimport updateGame from '../actions/updateGame';\nimport deleteGame from '../actions/deleteGame';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\nimport GameData from './GameData';\nimport GameSummary from './GameSummary';\nimport ImagesTab from './ImagesTab';\nimport ImageUploader from './ImageUploader';\nimport GamesTab from './GamesTab';\nimport PlayersTab from \"./PlayersTab\";\nimport GrayBubbleButton from '../containers/GrayBubbleButton';\nimport GreenBubbleButton from '../containers/GreenBubbleButton';\nimport { version } from '../../package.json';\nclass GroupPage extends Component {\n\n    constructor(props) {\n        super(props);\n        this.imageIndex = 0;\n        this.imagesCount = 7;\n        this.backgroundImage = `url(${props.group.imageUrl ||  `poker.jpg`})`;\n        this.clearGamesTabSelections = ()=>{};\n\n\n        this.state = { tabKey: 'summary', existingPlayerId: null  }\n    }\n\n    logout = ()=>{\n        this.setState({showMenu: false });\n        this.props.logout();\n    };\n\n    goHome = ()=>{\n        this.setState({showMenu: false });\n        this.props.goHome();\n    };\n\n    onKeyChange = (tabKey)=>{\n        this.clearGamesTabSelections();\n        this.clearPlayersTabSelections();\n        this.setState({tabKey });\n    };\n\n    handleNewPlayerChange = (existingPlayerId)=> {\n        this.setState({existingPlayerId});\n    };\n\n    showImageUploaderForm = ({ gameId })=>{\n        this.setState({ imageUploaderData: { gameId }});\n    }\n\n    hideImageUploaderForm = ()=>{\n        this.setState({ imageUploaderData: null});\n    }\n\n    /***/\n\n    getHeader = ()=>{\n\n        const { group } = this.props;\n        const {isAdmin} = group;\n\n        const menuItems = [];\n\n\n        if (isAdmin){\n            menuItems.push(<MenuItem key=\"menuItem1\" onClick={()=>this.props.editGroup(group)}>Edit Group</MenuItem>);\n        }\n\n        menuItems.push(<MenuItem key=\"menuItem5\" onClick={this.goHome}>Home</MenuItem>);\n        menuItems.push(<MenuItem key=\"menuItem6\" onClick={this.logout}>Logout</MenuItem>);\n        menuItems.push(<MenuItem key=\"menuItem6\" onClick={()=>{}}><div><hr/> <span className=\"version-menu-item-text\">version: </span><span className=\"version-menu-item-number\">{version}</span></div></MenuItem>);\n\n        return  <div id=\"app-header\" >\n            <MenuIcon id=\"menuIcon\" fontSize=\"inherit\" className='menu-icon' onClick={()=>this.setState({showMenu: !this.state.showMenu})} />\n\n            {this.state.showMenu &&\n            <Menu\n                id=\"simple-menu\"\n                anchorEl={ ()=>document.getElementById(\"menuIcon\") }\n                keepMounted\n                open={true}\n                onClose={()=>this.setState({showMenu: !this.state.showMenu})} >\n\n                {menuItems}\n\n            </Menu>}\n\n\n\n            <span id=\"app-header-text\"><img src=\"pokerStatsLogoWithSheep.png\" className=\"sheep-logo\"/>Group Page</span>\n        </div>\n    };\n\n    getNewGameSection = () => {\n        const legal = this.state.newGame.date && this.state.newGame.date.length === 10;\n\n        return (<div id=\"new-game-form\">\n                    <h2> Create a new game. </h2>\n                    <div className=\"new-game-section\">\n                        Game date:\n                        <input  className=\"left-margin\" type=\"date\" id=\"newGameDate\" min=\"2010-01-01\" max=\"2050-01-01\" value={this.state.newGame.date} onChange={this.handleNewGameDateChange}/>\n                    </div>\n                    <div className=\"new-game-section\">\n                       description:\n                        <input  type=\"text\" id=\"newGameExtra\" className=\"bordered-input left-margin left-pad\" value={this.state.newGame.description} onChange={this.handleNewGameDescriptionChange}/>\n                    </div>\n                    <div className=\"new-game-section\">\n\n                      <GrayBubbleButton className=\"button left-margin\"  onClick={()=>this.setState({newGame: null})}> Cancel </GrayBubbleButton>\n                        <GreenBubbleButton className=\"button left-margin\"  onClick={this.createNewGame} disabled={!legal}> Create </GreenBubbleButton>\n                    </div>\n\n\n                 </div>);\n    };\n\n\n    getGamesSummary = () =>{\n        return <GameSummary\n            game={this.state.gameSummary}\n            group={this.props.group}\n            back={()=>this.setState({editGame:null, gameSummary:null})}\n            edit={()=>this.onGameEditClick(this.state.gameSummary)}\n            delete={this.deleteSelectedGame}\n        />;\n    }\n\n    render() {\n\n        const { group } = this.props;\n\n        if (this.state.imageUploaderData){\n            return <ImageUploader group={group} {...this.state.imageUploaderData} close={this.hideImageUploaderForm} uploadImage={this.uploadImage}/>\n        }\n\n        const isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\n        const max = isMobile ? 7 : 8;\n\n        const header = this.getHeader();\n\n        const style = {\n            backgroundImage: this.backgroundImage,\n        };\n\n        return (\n            <div id=\"container\" className=\"group-page\">\n                {header}\n\n                <div id=\"group-image-title\" className=\"group-image-title\" style={style} >\n                    <div className=\"row\">\n                        <div className=\"col-xs-8 event-page-title\" >\n                            <div>{group.name}</div>\n                            <div  className=\"event-page-description\">{group.description}</div>\n\n                        </div>\n                    </div>\n                </div>\n\n\n                <div id=\"group-page-data\"  >\n                    <Tabs defaultActiveKey=\"profile\" id=\"uncontrolled-tab-example\" style={{fontSize: isMobile ? \"0.8em\" : \"1em\"}} activeKey={this.state.tabKey} onSelect={this.onKeyChange} variant=\"pills\">\n                        <Tab eventKey=\"summary\" title=\"summary\" >\n                            <GameData group={group}\n                                      playersCount={max}\n                                      IsGroupSummary={true}/>\n                        </Tab>\n                        <Tab eventKey=\"games\" title=\"Games\" >\n                            <div id=\"games-tab\">\n                                <GamesTab group={group}\n                                          remoteCreateGame={createGame}\n                                          remoteUpdateGame={updateGame}\n                                          remoteDeleteGame={deleteGame}\n                                          getGame={getGame}\n                                          removeGroupGame={this.props.removeGame}\n                                          updateGroupGame={this.props.updateGame}\n                                          removeGame={this.props.removeGame}\n                                          updateImage={this.props.updateImage}\n                                          setClearAll={ (func)=> { this.clearGamesTabSelections = func }}\n                                          user={this.props.user}\n                                          provider={this.props.provider}\n                                          token={this.props.token}/>\n                            </div>\n\n                        </Tab>\n                        <Tab eventKey=\"players\" title=\"Players\" >\n                            <div id=\"players-tab\">\n                                <PlayersTab\n                                group={group}\n                                updatePlayerData={this.props.updatePlayerData}\n                                updatePlayerRemoved={this.props.updatePlayerRemoved}\n                                setClearAll={ (func)=> { this.clearPlayersTabSelections = func }}\n                                user={this.props.user}\n                                provider={this.props.provider}\n                                token={this.props.token}/>\n\n                            </div>\n                        </Tab>\n\n                        <Tab eventKey=\"images\" title=\"Images\"  >\n                            <div id=\"images-tab\">\n                                <ImagesTab group={group}\n                                           provider={this.props.provider}\n                                           token={this.props.token}\n                                           user={this.props.user}\n                                           removeImage={this.props.removeImage}\n                                           uploadImage={this.props.uploadImage}\n                                           updateImage={this.props.updateImage}/>\n                            </div>\n                        </Tab>\n\n                    </Tabs>\n                </div>\n\n\n            </div>\n        );\n\n    }\n}\n\nexport default GroupPage;\n\n","/* eslint-disable no-console */\n/* eslint-disable no-unused-vars */\nimport request from 'request';\nimport URL_PREFIX from '../url';\n\nasync function generalRequest(data) {\n  return new Promise((resolve, reject) => {\n    const headers = {};\n    data.headers.forEach((header) => {\n      if (!header.includes(':')) {\n        return;\n      }\n      const [key, val] = header.split(':');\n      headers[key.trim()] = val.trim();\n    });\n    const options = {\n      method: data.method,\n      url: data.url,\n      headers,\n    };\n    if (data.body) {\n      options.body = JSON.stringify(data.body);\n    }\n    request(options, (error, response, body) => {\n      let bodyObj;\n      try {\n        bodyObj = JSON.parse(body);\n      } catch (e) {\n        console.log('e', e);\n      }\n      return resolve({\n        statusCode: response.statusCode,\n        body,\n        headers: response.headers,\n        bodyObj,\n        error,\n      });\n    });\n  });\n}\n\nexport default generalRequest;\n","\nimport React, { Component } from 'react';\nimport 'react-input-range/lib/css/index.css';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport GreenBubbleButton from '../containers/GreenBubbleButton';\nimport generalRequest from '../actions/generalRequest';\nimport JSONTree from 'react-json-tree'\n\n\n\nclass Postman extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = { tabKey:'Tab 1', tabs:[{ name:'Tab 1', method:'GET', url:'https://www.poker-stats.com/api/v2/groups/', headers:['provider: google', 'x-auth-token: ****']}] };\n\n\n    }\n    onKeyChange = (tabKey)=>{\n\n        if (tabKey === '+'){\n            console.log('+ was pressed')\n            const newStateTabs = [...this.state.tabs];\n            newStateTabs.push({name:`Tab ${this.state.tabs.length+1}`, method:'GET', url:'', headers:[]});\n            this.setState({tabs: newStateTabs, tabKey:newStateTabs[newStateTabs.length-1].name})\n        }else{\n            this.setState({tabKey})\n        }\n    };\n\n    async sendRequest(){\n        this.setState({bodyObj: null,statusCode: null,error: null,headers: null})\n        const tabData = this.state.tabs.find(x=>x.name === this.state.tabKey);\n        console.log('sendRequest tabData',tabData)\n        if (!tabData){\n            console.error('sendRequest no tabData found!',this.state.tabs,this.state.tabKey)\n        }\n\n        const {  statusCode,\n            body,\n            headers,\n            bodyObj,\n            error } = await generalRequest(tabData);\n\n        console.log('statusCode',statusCode)\n        console.log('body',body)\n        console.log('bodyObj',bodyObj)\n        console.log('error',error)\n        console.log('headers',headers)\n        this.setState({bodyObj,statusCode,error, headers})\n\n    }\n    render(){\n\n        const tabs = this.state.tabs.map(tabData=>{\n            return  <Tab eventKey={tabData.name} title={tabData.name} key={tabData.name}>\n                <div>\n                    <select className=\"postman-method-combo\" name=\"method\" value={tabData.method} onChange={(e)=>{\n                        const newTabs = [...this.state.tabs];\n                        newTabs.find(x=>x.name===tabData.name).method = e.target.value;\n                        this.setState({tabs: newTabs})\n\n                    }}>\n                        <option key={`_comboVals_get`} value=\"GET\">GET </option>\n                        <option key={`_comboVals_post`} value=\"POST\">POST </option>\n                        <option key={`_comboVals_put`} value=\"PUT\">PUT </option>\n                        <option key={`_comboVals_delete`} value=\"DELETE\">DELETE </option>\n                        <option key={`_comboVals_patch`} value=\"PATCH\">PATCH </option>\n                    </select>\n\n                    <input  className=\"postman-url\" type=\"text\" value={tabData.url} onChange={(e)=>{\n                        const newTabs = [...this.state.tabs];\n                        newTabs.find(x=>x.name===tabData.name).url = e.target.value;\n                        this.setState({tabs: newTabs})\n                    }}/>\n\n                    <GreenBubbleButton className=\"button left-margin\" onClick={()=>this.sendRequest()}> Send</GreenBubbleButton>\n\n                </div>\n                <div>\n                    <div>  Headers:</div>\n                    <div>{\n\n                        tabData.headers.map((header,index)=>{\n                            const key = header.split(':')[0].trim();\n                            const val = header.split(':')[1].trim();\n                            return  <div>\n                                <input className=\"postman-header postman-header-key\" type=\"text\" value={key} onChange={(e)=>{\n                                    const newTabs = [...this.state.tabs];\n                                    newTabs.find(x=>x.name===tabData.name).headers[index] = `${e.target.value}:${val}` ;\n                                    this.setState({tabs: newTabs})\n                                }}/>\n                                <input className=\"postman-header postman-header-value\" type=\"text\" value={val} onChange={(e)=>{\n                                    const newTabs = [...this.state.tabs];\n                                    newTabs.find(x=>x.name===tabData.name).headers[index] = `${key}:${e.target.value}` ;\n                                    this.setState({tabs: newTabs})\n                                }}/>\n\n                                {index === tabData.headers.length - 1 ? <div className=\"add-header-col\" onClick={()=>{\n                                    const newTabs = [...this.state.tabs];\n                                    newTabs.find(x=>x.name===tabData.name).headers.push(':')\n                                    this.setState({tabs: newTabs})\n                                }}>+</div> : <div></div>}\n                            </div>\n                        })\n                    }\n                    </div>\n\n\n\n\n                </div>\n\n\n                {this.state.statusCode ?   <div className=\"postman-result-div\">\n                    <div>result status code: {this.state.statusCode}</div>\n\n                    <div>\n                        result body:\n                        <div>\n                            <JSONTree data={this.state.bodyObj} />\n                        </div>\n                    </div>\n\n\n                    <div>\n\n                        result headers\n                        <div>\n                            <JSONTree data={this.state.headers} />\n                        </div>\n                    </div>\n\n                </div> : <div></div>}\n\n\n\n            </Tab>\n        })\n        if (tabs.length < 12){\n\n            tabs.push(<Tab eventKey=\"+\" title=\"+\" key=\"+\">\n            </Tab>)\n        }\n\n        return (<div id=\"postman\" >\n            <div id=\"postman-header\">Postman</div>\n            <div id=\"postman-div-body\">\n                <Tabs defaultActiveKey=\"profile\" id=\"uncontrolled-tab-example2\" style={{fontSize: \"1em\", }} activeKey={this.state.tabKey} onSelect={this.onKeyChange} variant=\"pills\">\n                    {tabs}\n                </Tabs>\n            </div>\n\n\n        </div>)\n\n    }\n}\n\nexport default Postman;\n","import request from 'request';\nimport URL_PREFIX from '../url';\n\n\nasync function login(provider, token) {\n  return new Promise((resolve, reject) => {\n    // console.log('login URL_PREFIX', URL_PREFIX);\n\n    const options = {\n      url: `${URL_PREFIX}/groups/`,\n      headers: {\n        provider,\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n    };\n    request(options, (error, response, body) => {\n      if (error || response.statusCode >= 400) {\n        if (error) {\n          console.error('request cb error', error);\n          return reject('failed to connect, server might be down');\n        }\n        const bodyObj = JSON.parse(body);\n        console.error('request cb error body', bodyObj);\n        return reject(bodyObj.title);\n      }\n\n      if (response && response.headers && response.headers['x-user-context']) {\n        const userContextString = response.headers['x-user-context'];\n        const userContext = JSON.parse(decodeURI(userContextString));\n        const groups = JSON.parse(body).results;\n\n        return resolve({\n          groups, userContext, provider, token,\n        });\n      }\n      console.error('request cb no header');\n\n      return reject('server response is missing the user context');\n    });\n  });\n}\n\nexport default login;\n","\nimport React, { Component } from 'react';\n\nimport FacebookLogin from  'react-facebook-login/dist/facebook-login-render-props';\nimport { GoogleLogin } from 'react-google-login';\n\nimport login from '../actions/login';\n\nimport Loader from \"../containers/Loading\";\nimport { version } from '../../package.json';\n\nconst ONE_DAY = 1000 * 60 * 60 * 24;\nconst GOOGLE_CLIENT_ID= '819855379342-js3mkfftkk25qopes38dcbhr4oorup45.apps.googleusercontent.com';\nconst FACEBOOK_APP_ID= '2487592561563671';\nconst protocol = window.location.protocol;\nconst isHttps = protocol==='https:';\nconst showFB =  isHttps;\nconst tryConnectToFB =  isHttps && !!window.location.search && window.location.search.includes('fb=true') ;\nconst httpsUrl = 'https://www.poker-stats.com?fb=true';\nclass Login extends Component {\n\n    constructor() {\n        super();\n        this.state = { error: null };\n        if (tryConnectToFB) {\n            setTimeout(()=>{\n                try {\n                    const fbButton = document.getElementById(\"fbButton\");\n                    if (fbButton) {\n                        fbButton.click(); // Click on the checkbox\n                    }\n                } catch (e) {\n                    console.log('e',e)\n                }\n\n            },1000)\n        }\n    }\n\n    onFailure = (error) => {\n        console.error('App onFailure', error);\n        this.setState({ error });\n    };\n\n    performLogin = async (provider, token, showError = true) => {\n        try{\n            const result = await login(provider, token);\n            const authData = localStorage.getItem('authData');\n            const issueDate  = authData ? JSON.parse(authData).issueDate : new Date();\n            localStorage.setItem('authData', JSON.stringify({provider, token, issueDate }));\n            return this.props.onLogin(result);\n\n\n        } catch(error) {\n            localStorage.removeItem('authData');\n            if (showError){\n                return this.onFailure(error);\n            } else{\n                return this.onFailure(null);\n            }\n        }\n    };\n\n    facebookResponse = (response) => {\n        if (response.accessToken){\n            this.performLogin('facebook', response.accessToken, true);\n        }else{\n            this.onFailure('login failed')\n        }\n\n    };\n\n    googleResponse = (response) => {\n        if (response.accessToken){\n            this.performLogin('google', response.accessToken, true);\n        }else{\n            this.onFailure('login failed')\n        }\n\n    };\n\n    render() {\n        const authData = localStorage.getItem('authData');\n        if (authData){\n            const {provider, token, issueDate } = JSON.parse(authData);\n            const timePassed = (new Date()).getTime() - (new Date(issueDate)).getTime();\n            if (timePassed > ONE_DAY){\n                localStorage.removeItem('authData');\n            } else{\n                this.performLogin(provider, token, false);\n                return <Loader />;\n            }\n        }\n        const google = (<GoogleLogin\n\n            clientId={GOOGLE_CLIENT_ID}\n            onSuccess={this.googleResponse}\n            onFailure={this.onFailure}\n            render={renderProps => (\n                <div className=\"login-button login-button-google\" onClick={renderProps.onClick}> LOGIN WITH GOOGLE</div>\n            )}\n        />);\n\n         const facebook = showFB ? (<FacebookLogin\n            disableMobileRedirect={true}\n            appId={FACEBOOK_APP_ID}\n            autoLoad={false}\n            fields=\"name,email,picture\"\n            callback={this.facebookResponse}\n            render={renderProps => (\n                <div id=\"fbButton\" className=\"login-button login-button-fb\" onClick={renderProps.onClick}> LOGIN WITH FACEBOOK</div>\n            )}\n         />) :  <div className=\"login-button login-button-fb\" onClick={()=>{ window.location = httpsUrl}}> LOGIN WITH FACEBOOK</div>;\n\n        return (\n            <div id=\"login-page\">\n                <div id=\"version\">\n                    version: {version}\n                </div>\n                <div>\n                    <img id=\"sheep-img\" src=\"sheep.png\" alt='sheep'/>\n                </div>\n\n                <div>\n                    <img id=\"pokerStatsLogo\" src=\"pokerStatsLogo.png\" alt='Chips'/>\n                </div>\n\n                <div>\n                    <img id=\"chips-img\" src=\"https://res.cloudinary.com/www-poker-stats-com/image/upload/v1618731943/Casino-Poker-Chips-croped.png\" alt='Chips'/>\n\n                </div>\n\n\n                {google}\n                {facebook}\n                <div id=\"loginErrorSection\">\n                    {this.state.error ? this.state.error : ''}\n                </div>\n\n\n            </div>\n        );\n\n    }\n}\n\nexport default Login;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { transitions, positions, Provider as AlertProvider } from 'react-alert';\nimport AlertTemplate from 'react-alert-template-basic';\n\nimport './style/app.css';\n\nconst options = {\n    // you can also just use 'bottom center'\n    position: positions.BOTTOM_CENTER,\n    timeout: 3000,\n    offset: '30px',\n    // you can also just use 'scale'\n    transition: transitions.SCALE\n}\n\nconst Root = () => (\n    <AlertProvider template={AlertTemplate} {...options}>\n        <App />\n    </AlertProvider>\n)\n\n\nReactDOM.render(\n    <Root/>,\n  document.getElementById('root')\n);\n","import React from 'react'\n\nconst RedBubbleButton = (props) => {\n\n    return (\n        <button {...props} className={`${props.className} confetti-button confetti-button-red`} onClick={(e)=>{\n            e.preventDefault();\n            //reset animation\n            try {\n                e.target.classList.remove('animate');\n            } catch (e) {\n            }\n\n            try {\n                e.target.classList.add('animate');\n            } catch (e) {\n            }\n            setTimeout(function(){\n                try {\n                    e.target.classList.remove('animate');\n                } catch (e) {\n                }\n            },700);\n            setTimeout(function(){\n                try {\n                    props.onClick(e);\n                } catch (e) {\n                }\n            },500);\n\n        }} > {props.children}</button>\n    )\n}\n\nexport default RedBubbleButton;\n","import React from 'react'\nimport { useAlert } from 'react-alert'\n\nconst ShowErrorAlert = (props) => {\n    const alert = useAlert();\n    const {message} = props;\n    setTimeout(()=>{\n            alert.error(message);\n    },1);\n    return (\n        <div/>\n    )\n}\n\nexport default ShowErrorAlert;\n","import React from 'react'\nimport { useAlert } from 'react-alert'\n\nconst ShowSuccessAlert = (props) => {\n    const alert = useAlert();\n    const {message} = props;\n    setTimeout(()=>{\n            alert.success(message);\n    },1);\n    return (\n        <div/>\n    )\n}\n\nexport default ShowSuccessAlert;\n"],"sourceRoot":""}